{"ast":null,"code":"import $kKvpS$peerjsjsbinarypack from \"peerjs-js-binarypack\";\nimport $kKvpS$webrtcadapter from \"webrtc-adapter\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {\n    get: v,\n    set: s,\n    enumerable: true,\n    configurable: true\n  });\n}\n\nvar $af8cf1f663f490f4$var$webRTCAdapter = //@ts-ignore\n$kKvpS$webrtcadapter.default || $kKvpS$webrtcadapter;\nvar $af8cf1f663f490f4$export$25be9502477c137d = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this.isIOS = [\"iPad\", \"iPhone\", \"iPod\"].includes(navigator.platform);\n    this.supportedBrowsers = [\"firefox\", \"chrome\", \"safari\"];\n    this.minFirefoxVersion = 59;\n    this.minChromeVersion = 72;\n    this.minSafariVersion = 605;\n  }\n\n  class_1.prototype.isWebRTCSupported = function () {\n    return typeof RTCPeerConnection !== \"undefined\";\n  };\n\n  class_1.prototype.isBrowserSupported = function () {\n    var browser = this.getBrowser();\n    var version = this.getVersion();\n    var validBrowser = this.supportedBrowsers.includes(browser);\n    if (!validBrowser) return false;\n    if (browser === \"chrome\") return version >= this.minChromeVersion;\n    if (browser === \"firefox\") return version >= this.minFirefoxVersion;\n    if (browser === \"safari\") return !this.isIOS && version >= this.minSafariVersion;\n    return false;\n  };\n\n  class_1.prototype.getBrowser = function () {\n    return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser;\n  };\n\n  class_1.prototype.getVersion = function () {\n    return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n  };\n\n  class_1.prototype.isUnifiedPlanSupported = function () {\n    var browser = this.getBrowser();\n    var version = $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n    if (browser === \"chrome\" && version < this.minChromeVersion) return false;\n    if (browser === \"firefox\" && version >= this.minFirefoxVersion) return true;\n    if (!window.RTCRtpTransceiver || !(\"currentDirection\" in RTCRtpTransceiver.prototype)) return false;\n    var tempPc;\n    var supported = false;\n\n    try {\n      tempPc = new RTCPeerConnection();\n      tempPc.addTransceiver(\"audio\");\n      supported = true;\n    } catch (e) {} finally {\n      if (tempPc) tempPc.close();\n    }\n\n    return supported;\n  };\n\n  class_1.prototype.toString = function () {\n    return \"Supports:\\n    browser:\".concat(this.getBrowser(), \"\\n    version:\").concat(this.getVersion(), \"\\n    isIOS:\").concat(this.isIOS, \"\\n    isWebRTCSupported:\").concat(this.isWebRTCSupported(), \"\\n    isBrowserSupported:\").concat(this.isBrowserSupported(), \"\\n    isUnifiedPlanSupported:\").concat(this.isUnifiedPlanSupported());\n  };\n\n  return class_1;\n}())();\nvar $06cb531ed7840f78$var$DEFAULT_CONFIG = {\n  iceServers: [{\n    urls: \"stun:stun.l.google.com:19302\"\n  }, {\n    urls: [\"turn:eu-0.turn.peerjs.com:3478\", \"turn:us-0.turn.peerjs.com:3478\"],\n    username: \"peerjs\",\n    credential: \"peerjsp\"\n  }],\n  sdpSemantics: \"unified-plan\"\n};\n\nvar $06cb531ed7840f78$var$Util =\n/** @class */\nfunction () {\n  function Util() {\n    this.CLOUD_HOST = \"0.peerjs.com\";\n    this.CLOUD_PORT = 443; // Browsers that need chunking:\n\n    this.chunkedBrowsers = {\n      Chrome: 1,\n      chrome: 1\n    };\n    this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n    // Returns browser-agnostic default config\n\n    this.defaultConfig = $06cb531ed7840f78$var$DEFAULT_CONFIG;\n    this.browser = $af8cf1f663f490f4$export$25be9502477c137d.getBrowser();\n    this.browserVersion = $af8cf1f663f490f4$export$25be9502477c137d.getVersion(); // Lists which features are supported\n\n    this.supports = function () {\n      var supported = {\n        browser: $af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),\n        webRTC: $af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),\n        audioVideo: false,\n        data: false,\n        binaryBlob: false,\n        reliable: false\n      };\n      if (!supported.webRTC) return supported;\n      var pc;\n\n      try {\n        pc = new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG);\n        supported.audioVideo = true;\n        var dc = void 0;\n\n        try {\n          dc = pc.createDataChannel(\"_PEERJSTEST\", {\n            ordered: true\n          });\n          supported.data = true;\n          supported.reliable = !!dc.ordered; // Binary test\n\n          try {\n            dc.binaryType = \"blob\";\n            supported.binaryBlob = !$af8cf1f663f490f4$export$25be9502477c137d.isIOS;\n          } catch (e) {}\n        } catch (e) {} finally {\n          if (dc) dc.close();\n        }\n      } catch (e) {} finally {\n        if (pc) pc.close();\n      }\n\n      return supported;\n    }();\n\n    this.pack = $kKvpS$peerjsjsbinarypack.pack;\n    this.unpack = $kKvpS$peerjsjsbinarypack.unpack; // Binary stuff\n\n    this._dataCount = 1;\n  }\n\n  Util.prototype.noop = function () {}; // Ensure alphanumeric ids\n\n\n  Util.prototype.validateId = function (id) {\n    // Allow empty ids\n    return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n  };\n\n  Util.prototype.chunk = function (blob) {\n    var chunks = [];\n    var size = blob.size;\n    var total = Math.ceil(size / $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n    var index = 0;\n    var start = 0;\n\n    while (start < size) {\n      var end = Math.min(size, start + $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n      var b = blob.slice(start, end);\n      var chunk = {\n        __peerData: this._dataCount,\n        n: index,\n        data: b,\n        total: total\n      };\n      chunks.push(chunk);\n      start = end;\n      index++;\n    }\n\n    this._dataCount++;\n    return chunks;\n  };\n\n  Util.prototype.blobToArrayBuffer = function (blob, cb) {\n    var fr = new FileReader();\n\n    fr.onload = function (evt) {\n      if (evt.target) cb(evt.target.result);\n    };\n\n    fr.readAsArrayBuffer(blob);\n    return fr;\n  };\n\n  Util.prototype.binaryStringToArrayBuffer = function (binary) {\n    var byteArray = new Uint8Array(binary.length);\n\n    for (var i = 0; i < binary.length; i++) byteArray[i] = binary.charCodeAt(i) & 0xff;\n\n    return byteArray.buffer;\n  };\n\n  Util.prototype.randomToken = function () {\n    return Math.random().toString(36).slice(2);\n  };\n\n  Util.prototype.isSecure = function () {\n    return location.protocol === \"https:\";\n  };\n\n  return Util;\n}();\n\nvar $06cb531ed7840f78$export$7debb50ef11d5e0b = new $06cb531ed7840f78$var$Util();\nvar $26088d7da5b03f69$exports = {};\n$parcel$export($26088d7da5b03f69$exports, \"Peer\", () => $26088d7da5b03f69$export$ecd1fc136c422448, v => $26088d7da5b03f69$export$ecd1fc136c422448 = v);\nvar $ac9b757d51178e15$exports = {};\n'use strict';\n\nvar $ac9b757d51178e15$var$has = Object.prototype.hasOwnProperty,\n    $ac9b757d51178e15$var$prefix = '~';\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\n\nfunction $ac9b757d51178e15$var$Events() {} //\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\n\n\nif (Object.create) {\n  $ac9b757d51178e15$var$Events.prototype = Object.create(null); //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n\n  if (!new $ac9b757d51178e15$var$Events().__proto__) $ac9b757d51178e15$var$prefix = false;\n}\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\n\n\nfunction $ac9b757d51178e15$var$EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\n\n\nfunction $ac9b757d51178e15$var$addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') throw new TypeError('The listener must be a function');\n  var listener = new $ac9b757d51178e15$var$EE(fn, context || emitter, once),\n      evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);else emitter._events[evt] = [emitter._events[evt], listener];\n  return emitter;\n}\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\n\n\nfunction $ac9b757d51178e15$var$clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new $ac9b757d51178e15$var$Events();else delete emitter._events[evt];\n}\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\n\n\nfunction $ac9b757d51178e15$var$EventEmitter() {\n  this._events = new $ac9b757d51178e15$var$Events();\n  this._eventsCount = 0;\n}\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.eventNames = function eventNames() {\n  var names = [],\n      events,\n      name;\n  if (this._eventsCount === 0) return names;\n\n  for (name in events = this._events) if ($ac9b757d51178e15$var$has.call(events, name)) names.push($ac9b757d51178e15$var$prefix ? name.slice(1) : name);\n\n  if (Object.getOwnPropertySymbols) return names.concat(Object.getOwnPropertySymbols(events));\n  return names;\n};\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.listeners = function listeners(event) {\n  var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event,\n      handlers = this._events[evt];\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) ee[i] = handlers[i].fn;\n\n  return ee;\n};\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event,\n      listeners = this._events[evt];\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n  if (!this._events[evt]) return false;\n  var listeners = this._events[evt],\n      len = arguments.length,\n      args,\n      i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1:\n        return listeners.fn.call(listeners.context), true;\n\n      case 2:\n        return listeners.fn.call(listeners.context, a1), true;\n\n      case 3:\n        return listeners.fn.call(listeners.context, a1, a2), true;\n\n      case 4:\n        return listeners.fn.call(listeners.context, a1, a2, a3), true;\n\n      case 5:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n\n      case 6:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len - 1); i < len; i++) args[i - 1] = arguments[i];\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length,\n        j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1:\n          listeners[i].fn.call(listeners[i].context);\n          break;\n\n        case 2:\n          listeners[i].fn.call(listeners[i].context, a1);\n          break;\n\n        case 3:\n          listeners[i].fn.call(listeners[i].context, a1, a2);\n          break;\n\n        case 4:\n          listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n          break;\n\n        default:\n          if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) args[j - 1] = arguments[j];\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.on = function on(event, fn, context) {\n  return $ac9b757d51178e15$var$addListener(this, event, fn, context, false);\n};\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.once = function once(event, fn, context) {\n  return $ac9b757d51178e15$var$addListener(this, event, fn, context, true);\n};\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n  if (!this._events[evt]) return this;\n\n  if (!fn) {\n    $ac9b757d51178e15$var$clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) $ac9b757d51178e15$var$clearEvent(this, evt);\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) events.push(listeners[i]); //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n\n\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;else $ac9b757d51178e15$var$clearEvent(this, evt);\n  }\n\n  return this;\n};\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (this._events[evt]) $ac9b757d51178e15$var$clearEvent(this, evt);\n  } else {\n    this._events = new $ac9b757d51178e15$var$Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n}; //\n// Alias methods names because people roll like that.\n//\n\n\n$ac9b757d51178e15$var$EventEmitter.prototype.off = $ac9b757d51178e15$var$EventEmitter.prototype.removeListener;\n$ac9b757d51178e15$var$EventEmitter.prototype.addListener = $ac9b757d51178e15$var$EventEmitter.prototype.on; //\n// Expose the prefix.\n//\n\n$ac9b757d51178e15$var$EventEmitter.prefixed = $ac9b757d51178e15$var$prefix; //\n// Allow `EventEmitter` to be imported as module namespace.\n//\n\n$ac9b757d51178e15$var$EventEmitter.EventEmitter = $ac9b757d51178e15$var$EventEmitter;\n$ac9b757d51178e15$exports = $ac9b757d51178e15$var$EventEmitter;\nvar $1615705ecc6adca3$exports = {};\n$parcel$export($1615705ecc6adca3$exports, \"LogLevel\", () => $1615705ecc6adca3$export$243e62d78d3b544d, v => $1615705ecc6adca3$export$243e62d78d3b544d = v);\n$parcel$export($1615705ecc6adca3$exports, \"default\", () => $1615705ecc6adca3$export$2e2bcd8739ae039, v => $1615705ecc6adca3$export$2e2bcd8739ae039 = v);\n\nvar $1615705ecc6adca3$var$__read = undefined && undefined.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar $1615705ecc6adca3$var$__spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) {\n    for (var i = 0, l = from.length, ar; i < l; i++) if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar $1615705ecc6adca3$var$LOG_PREFIX = \"PeerJS: \";\nvar $1615705ecc6adca3$export$243e62d78d3b544d;\n\n(function ($1615705ecc6adca3$export$243e62d78d3b544d) {\n  $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Disabled\"] = 0] = \"Disabled\";\n  $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Errors\"] = 1] = \"Errors\";\n  $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Warnings\"] = 2] = \"Warnings\";\n  $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"All\"] = 3] = \"All\";\n})($1615705ecc6adca3$export$243e62d78d3b544d || ($1615705ecc6adca3$export$243e62d78d3b544d = {}));\n\nvar $1615705ecc6adca3$var$Logger =\n/** @class */\nfunction () {\n  function Logger() {\n    this._logLevel = $1615705ecc6adca3$export$243e62d78d3b544d.Disabled;\n  }\n\n  Object.defineProperty(Logger.prototype, \"logLevel\", {\n    get: function () {\n      return this._logLevel;\n    },\n    set: function (logLevel) {\n      this._logLevel = logLevel;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  Logger.prototype.log = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];\n\n    if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.All], $1615705ecc6adca3$var$__read(args), false));\n  };\n\n  Logger.prototype.warn = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];\n\n    if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Warnings], $1615705ecc6adca3$var$__read(args), false));\n  };\n\n  Logger.prototype.error = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];\n\n    if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Errors], $1615705ecc6adca3$var$__read(args), false));\n  };\n\n  Logger.prototype.setLogFunction = function (fn) {\n    this._print = fn;\n  };\n\n  Logger.prototype._print = function (logLevel) {\n    var rest = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) rest[_i - 1] = arguments[_i];\n\n    var copy = $1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$var$LOG_PREFIX], $1615705ecc6adca3$var$__read(rest), false);\n\n    for (var i in copy) if (copy[i] instanceof Error) copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n\n    if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) console.log.apply(console, $1615705ecc6adca3$var$__spreadArray([], $1615705ecc6adca3$var$__read(copy), false));else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) console.warn.apply(console, $1615705ecc6adca3$var$__spreadArray([\"WARNING\"], $1615705ecc6adca3$var$__read(copy), false));else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) console.error.apply(console, $1615705ecc6adca3$var$__spreadArray([\"ERROR\"], $1615705ecc6adca3$var$__read(copy), false));\n  };\n\n  return Logger;\n}();\n\nvar $1615705ecc6adca3$export$2e2bcd8739ae039 = new $1615705ecc6adca3$var$Logger();\nvar $31d11a8d122cb4b7$exports = {};\n$parcel$export($31d11a8d122cb4b7$exports, \"Socket\", () => $31d11a8d122cb4b7$export$4798917dbf149b79, v => $31d11a8d122cb4b7$export$4798917dbf149b79 = v);\nvar $60fadef21a2daafc$export$3157d57b4135e3bc;\n\n(function ($60fadef21a2daafc$export$3157d57b4135e3bc) {\n  $60fadef21a2daafc$export$3157d57b4135e3bc[\"Data\"] = \"data\";\n  $60fadef21a2daafc$export$3157d57b4135e3bc[\"Media\"] = \"media\";\n})($60fadef21a2daafc$export$3157d57b4135e3bc || ($60fadef21a2daafc$export$3157d57b4135e3bc = {}));\n\nvar $60fadef21a2daafc$export$9547aaa2e39030ff;\n\n(function ($60fadef21a2daafc$export$9547aaa2e39030ff) {\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"BrowserIncompatible\"] = \"browser-incompatible\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"Disconnected\"] = \"disconnected\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidID\"] = \"invalid-id\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidKey\"] = \"invalid-key\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"Network\"] = \"network\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"PeerUnavailable\"] = \"peer-unavailable\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"SslUnavailable\"] = \"ssl-unavailable\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"ServerError\"] = \"server-error\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketError\"] = \"socket-error\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketClosed\"] = \"socket-closed\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"UnavailableID\"] = \"unavailable-id\";\n  $60fadef21a2daafc$export$9547aaa2e39030ff[\"WebRTC\"] = \"webrtc\";\n})($60fadef21a2daafc$export$9547aaa2e39030ff || ($60fadef21a2daafc$export$9547aaa2e39030ff = {}));\n\nvar $60fadef21a2daafc$export$89f507cf986a947;\n\n(function ($60fadef21a2daafc$export$89f507cf986a947) {\n  $60fadef21a2daafc$export$89f507cf986a947[\"Binary\"] = \"binary\";\n  $60fadef21a2daafc$export$89f507cf986a947[\"BinaryUTF8\"] = \"binary-utf8\";\n  $60fadef21a2daafc$export$89f507cf986a947[\"JSON\"] = \"json\";\n})($60fadef21a2daafc$export$89f507cf986a947 || ($60fadef21a2daafc$export$89f507cf986a947 = {}));\n\nvar $60fadef21a2daafc$export$3b5c4a4b6354f023;\n\n(function ($60fadef21a2daafc$export$3b5c4a4b6354f023) {\n  $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Message\"] = \"message\";\n  $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Disconnected\"] = \"disconnected\";\n  $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Error\"] = \"error\";\n  $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Close\"] = \"close\";\n})($60fadef21a2daafc$export$3b5c4a4b6354f023 || ($60fadef21a2daafc$export$3b5c4a4b6354f023 = {}));\n\nvar $60fadef21a2daafc$export$adb4a1754da6f10d;\n\n(function ($60fadef21a2daafc$export$adb4a1754da6f10d) {\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Heartbeat\"] = \"HEARTBEAT\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Candidate\"] = \"CANDIDATE\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Offer\"] = \"OFFER\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Answer\"] = \"ANSWER\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Open\"] = \"OPEN\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Error\"] = \"ERROR\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"IdTaken\"] = \"ID-TAKEN\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"InvalidKey\"] = \"INVALID-KEY\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Leave\"] = \"LEAVE\";\n  $60fadef21a2daafc$export$adb4a1754da6f10d[\"Expire\"] = \"EXPIRE\";\n})($60fadef21a2daafc$export$adb4a1754da6f10d || ($60fadef21a2daafc$export$adb4a1754da6f10d = {}));\n\nvar $0d1ed891c5cb27c0$exports = {};\n$0d1ed891c5cb27c0$exports = JSON.parse(\"{\\\"name\\\":\\\"peerjs\\\",\\\"version\\\":\\\"1.4.7\\\",\\\"keywords\\\":[\\\"peerjs\\\",\\\"webrtc\\\",\\\"p2p\\\",\\\"rtc\\\"],\\\"description\\\":\\\"PeerJS client\\\",\\\"homepage\\\":\\\"https://peerjs.com\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/peers/peerjs/issues\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"https://github.com/peers/peerjs\\\"},\\\"license\\\":\\\"MIT\\\",\\\"contributors\\\":[\\\"Michelle Bu <michelle@michellebu.com>\\\",\\\"afrokick <devbyru@gmail.com>\\\",\\\"ericz <really.ez@gmail.com>\\\",\\\"Jairo <kidandcat@gmail.com>\\\",\\\"Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>\\\",\\\"Jairo Caro-Accino Viciana <jairo@galax.be>\\\",\\\"Carlos Caballero <carlos.caballero.gonzalez@gmail.com>\\\",\\\"hc <hheennrryy@gmail.com>\\\",\\\"Muhammad Asif <capripio@gmail.com>\\\",\\\"PrashoonB <prashoonbhattacharjee@gmail.com>\\\",\\\"Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>\\\",\\\"akotynski <aleksanderkotbury@gmail.com>\\\",\\\"lmb <i@lmb.io>\\\",\\\"Jairooo <jairocaro@msn.com>\\\",\\\"Moritz Stückler <moritz.stueckler@gmail.com>\\\",\\\"Simon <crydotsnakegithub@gmail.com>\\\",\\\"Denis Lukov <denismassters@gmail.com>\\\",\\\"Philipp Hancke <fippo@andyet.net>\\\",\\\"Hans Oksendahl <hansoksendahl@gmail.com>\\\",\\\"Jess <jessachandler@gmail.com>\\\",\\\"khankuan <khankuan@gmail.com>\\\",\\\"DUODVK <kurmanov.work@gmail.com>\\\",\\\"XiZhao <kwang1imsa@gmail.com>\\\",\\\"Matthias Lohr <matthias@lohr.me>\\\",\\\"=frank tree <=frnktrb@googlemail.com>\\\",\\\"Andre Eckardt <aeckardt@outlook.com>\\\",\\\"Chris Cowan <agentme49@gmail.com>\\\",\\\"Alex Chuev <alex@chuev.com>\\\",\\\"alxnull <alxnull@e.mail.de>\\\",\\\"Yemel Jardi <angel.jardi@gmail.com>\\\",\\\"Ben Parnell <benjaminparnell.94@gmail.com>\\\",\\\"Benny Lichtner <bennlich@gmail.com>\\\",\\\"fresheneesz <bitetrudpublic@gmail.com>\\\",\\\"bob.barstead@exaptive.com <bob.barstead@exaptive.com>\\\",\\\"chandika <chandika@gmail.com>\\\",\\\"emersion <contact@emersion.fr>\\\",\\\"Christopher Van <cvan@users.noreply.github.com>\\\",\\\"eddieherm <edhermoso@gmail.com>\\\",\\\"Eduardo Pinho <enet4mikeenet@gmail.com>\\\",\\\"Evandro Zanatta <ezanatta@tray.net.br>\\\",\\\"Gardner Bickford <gardner@users.noreply.github.com>\\\",\\\"Gian Luca <gianluca.cecchi@cynny.com>\\\",\\\"PatrickJS <github@gdi2290.com>\\\",\\\"jonnyf <github@jonathanfoss.co.uk>\\\",\\\"Hizkia Felix <hizkifw@gmail.com>\\\",\\\"Hristo Oskov <hristo.oskov@gmail.com>\\\",\\\"Isaac Madwed <i.madwed@gmail.com>\\\",\\\"Ilya Konanykhin <ilya.konanykhin@gmail.com>\\\",\\\"jasonbarry <jasbarry@me.com>\\\",\\\"Jonathan Burke <jonathan.burke.1311@googlemail.com>\\\",\\\"Josh Hamit <josh.hamit@gmail.com>\\\",\\\"Jordan Austin <jrax86@gmail.com>\\\",\\\"Joel Wetzell <jwetzell@yahoo.com>\\\",\\\"xizhao <kevin.wang@cloudera.com>\\\",\\\"Alberto Torres <kungfoobar@gmail.com>\\\",\\\"Jonathan Mayol <mayoljonathan@gmail.com>\\\",\\\"Jefferson Felix <me@jsfelix.dev>\\\",\\\"Rolf Erik Lekang <me@rolflekang.com>\\\",\\\"Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>\\\",\\\"Pepijn de Vos <pepijndevos@gmail.com>\\\",\\\"JooYoung <qkdlql@naver.com>\\\",\\\"Tobias Speicher <rootcommander@gmail.com>\\\",\\\"Steve Blaurock <sblaurock@gmail.com>\\\",\\\"Kyrylo Shegeda <shegeda@ualberta.ca>\\\",\\\"Diwank Singh Tomer <singh@diwank.name>\\\",\\\"Sören Balko <Soeren.Balko@gmail.com>\\\",\\\"Arpit Solanki <solankiarpit1997@gmail.com>\\\",\\\"Yuki Ito <yuki@gnnk.net>\\\",\\\"Artur Zayats <zag2art@gmail.com>\\\"],\\\"funding\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"collective\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"files\\\":[\\\"dist/*\\\"],\\\"sideEffects\\\":[\\\"lib/global.ts\\\",\\\"lib/supports.ts\\\"],\\\"main\\\":\\\"dist/bundler.cjs\\\",\\\"module\\\":\\\"dist/bundler.mjs\\\",\\\"browser-minified\\\":\\\"dist/peerjs.min.js\\\",\\\"browser-unminified\\\":\\\"dist/peerjs.js\\\",\\\"types\\\":\\\"dist/types.d.ts\\\",\\\"engines\\\":{\\\"node\\\":\\\">= 10\\\"},\\\"targets\\\":{\\\"types\\\":{\\\"source\\\":\\\"lib/exports.ts\\\"},\\\"main\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"module\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"includeNodeModules\\\":[\\\"eventemitter3\\\"],\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"browser-minified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":true,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"},\\\"browser-unminified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":false,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"}},\\\"scripts\\\":{\\\"contributors\\\":\\\"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\\\\\\"chore(contributors): update and sort contributors list\\\\\\\"\\\",\\\"check\\\":\\\"tsc --noEmit\\\",\\\"watch\\\":\\\"parcel watch\\\",\\\"build\\\":\\\"rm -rf dist && parcel build\\\",\\\"prepublishOnly\\\":\\\"npm run build\\\",\\\"test\\\":\\\"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts\\\",\\\"format\\\":\\\"prettier --write .\\\",\\\"semantic-release\\\":\\\"semantic-release\\\"},\\\"devDependencies\\\":{\\\"@parcel/config-default\\\":\\\"^2.5.0\\\",\\\"@parcel/packager-ts\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-tsc\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-types\\\":\\\"^2.5.0\\\",\\\"@semantic-release/changelog\\\":\\\"^6.0.1\\\",\\\"@semantic-release/git\\\":\\\"^10.0.1\\\",\\\"@types/chai\\\":\\\"^4.3.0\\\",\\\"@types/mocha\\\":\\\"^9.1.0\\\",\\\"@types/node\\\":\\\"^17.0.18\\\",\\\"chai\\\":\\\"^4.3.6\\\",\\\"git-authors-cli\\\":\\\"^1.0.40\\\",\\\"jsdom\\\":\\\"^19.0.0\\\",\\\"jsdom-global\\\":\\\"^3.0.2\\\",\\\"mocha\\\":\\\"^9.2.0\\\",\\\"mock-socket\\\":\\\"8.0.5\\\",\\\"parcel\\\":\\\"^2.5.0\\\",\\\"parcel-transformer-tsc-sourcemaps\\\":\\\"^1.0.2\\\",\\\"prettier\\\":\\\"^2.6.2\\\",\\\"semantic-release\\\":\\\"^19.0.2\\\",\\\"standard\\\":\\\"^16.0.4\\\",\\\"ts-node\\\":\\\"^10.5.0\\\",\\\"typescript\\\":\\\"^4.5.5\\\"},\\\"dependencies\\\":{\\\"@swc/helpers\\\":\\\"^0.3.13\\\",\\\"eventemitter3\\\":\\\"^4.0.7\\\",\\\"peerjs-js-binarypack\\\":\\\"1.0.1\\\",\\\"webrtc-adapter\\\":\\\"^7.7.1\\\"}}\");\n\nvar $31d11a8d122cb4b7$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $31d11a8d122cb4b7$var$__read = undefined && undefined.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar $31d11a8d122cb4b7$var$__spreadArray = undefined && undefined.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) {\n    for (var i = 0, l = from.length, ar; i < l; i++) if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar $31d11a8d122cb4b7$var$__values = undefined && undefined.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */\n\n\nvar $31d11a8d122cb4b7$export$4798917dbf149b79 =\n/** @class */\nfunction (_super) {\n  $31d11a8d122cb4b7$var$__extends($31d11a8d122cb4b7$export$4798917dbf149b79, _super);\n\n  function $31d11a8d122cb4b7$export$4798917dbf149b79(secure, host, port, path, key, pingInterval) {\n    if (pingInterval === void 0) pingInterval = 5000;\n\n    var _this = _super.call(this) || this;\n\n    _this.pingInterval = pingInterval;\n    _this._disconnected = true;\n    _this._messagesQueue = [];\n    var wsProtocol = secure ? \"wss://\" : \"ws://\";\n    _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n    return _this;\n  }\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.start = function (id, token) {\n    var _this = this;\n\n    this._id = id;\n    var wsUrl = \"\".concat(this._baseUrl, \"&id=\").concat(id, \"&token=\").concat(token);\n    if (!!this._socket || !this._disconnected) return;\n    this._socket = new WebSocket(wsUrl + \"&version=\" + $0d1ed891c5cb27c0$exports.version);\n    this._disconnected = false;\n\n    this._socket.onmessage = function (event) {\n      var data;\n\n      try {\n        data = JSON.parse(event.data);\n        $1615705ecc6adca3$exports.default.log(\"Server message received:\", data);\n      } catch (e) {\n        $1615705ecc6adca3$exports.default.log(\"Invalid server message\", event.data);\n        return;\n      }\n\n      _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, data);\n    };\n\n    this._socket.onclose = function (event) {\n      if (_this._disconnected) return;\n      $1615705ecc6adca3$exports.default.log(\"Socket closed.\", event);\n\n      _this._cleanup();\n\n      _this._disconnected = true;\n\n      _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected);\n    }; // Take care of the queue of connections if necessary and make sure Peer knows\n    // socket is open.\n\n\n    this._socket.onopen = function () {\n      if (_this._disconnected) return;\n\n      _this._sendQueuedMessages();\n\n      $1615705ecc6adca3$exports.default.log(\"Socket open\");\n\n      _this._scheduleHeartbeat();\n    };\n  };\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._scheduleHeartbeat = function () {\n    var _this = this;\n\n    this._wsPingTimer = setTimeout(function () {\n      _this._sendHeartbeat();\n    }, this.pingInterval);\n  };\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendHeartbeat = function () {\n    if (!this._wsOpen()) {\n      $1615705ecc6adca3$exports.default.log(\"Cannot send heartbeat, because socket closed\");\n      return;\n    }\n\n    var message = JSON.stringify({\n      type: $60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat\n    });\n\n    this._socket.send(message);\n\n    this._scheduleHeartbeat();\n  };\n  /** Is the websocket currently open? */\n\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._wsOpen = function () {\n    return !!this._socket && this._socket.readyState === 1;\n  };\n  /** Send queued messages. */\n\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendQueuedMessages = function () {\n    var e_1, _a; //Create copy of queue and clear it,\n    //because send method push the message back to queue if smth will go wrong\n\n\n    var copiedQueue = $31d11a8d122cb4b7$var$__spreadArray([], $31d11a8d122cb4b7$var$__read(this._messagesQueue), false);\n    this._messagesQueue = [];\n\n    try {\n      for (var copiedQueue_1 = $31d11a8d122cb4b7$var$__values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()) {\n        var message = copiedQueue_1_1.value;\n        this.send(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  /** Exposed send for DC & Peer. */\n\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.send = function (data) {\n    if (this._disconnected) return; // If we didn't get an ID yet, we can't yet send anything so we should queue\n    // up these messages.\n\n    if (!this._id) {\n      this._messagesQueue.push(data);\n\n      return;\n    }\n\n    if (!data.type) {\n      this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, \"Invalid message\");\n      return;\n    }\n\n    if (!this._wsOpen()) return;\n    var message = JSON.stringify(data);\n\n    this._socket.send(message);\n  };\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.close = function () {\n    if (this._disconnected) return;\n\n    this._cleanup();\n\n    this._disconnected = true;\n  };\n\n  $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._cleanup = function () {\n    if (this._socket) {\n      this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n\n      this._socket.close();\n\n      this._socket = undefined;\n    }\n\n    clearTimeout(this._wsPingTimer);\n  };\n\n  return $31d11a8d122cb4b7$export$4798917dbf149b79;\n}($ac9b757d51178e15$exports.EventEmitter);\n\nvar $353dee38f9ab557b$exports = {};\n$parcel$export($353dee38f9ab557b$exports, \"MediaConnection\", () => $353dee38f9ab557b$export$4a84e95a2324ac29, v => $353dee38f9ab557b$export$4a84e95a2324ac29 = v);\nvar $77f14d3e81888156$exports = {};\n$parcel$export($77f14d3e81888156$exports, \"Negotiator\", () => $77f14d3e81888156$export$89e6bb5ad64bf4a, v => $77f14d3e81888156$export$89e6bb5ad64bf4a = v);\n\nvar $77f14d3e81888156$var$__assign = undefined && undefined.__assign || function () {\n  $77f14d3e81888156$var$__assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return $77f14d3e81888156$var$__assign.apply(this, arguments);\n};\n\nvar $77f14d3e81888156$var$__awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar $77f14d3e81888156$var$__generator = undefined && undefined.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n/**\n * Manages all negotiations between Peers.\n */\n\n\nvar $77f14d3e81888156$export$89e6bb5ad64bf4a =\n/** @class */\nfunction () {\n  function $77f14d3e81888156$export$89e6bb5ad64bf4a(connection) {\n    this.connection = connection;\n  }\n  /** Returns a PeerConnection object set up correctly (for data, media). */\n\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.startConnection = function (options) {\n    var peerConnection = this._startPeerConnection(); // Set the connection's PC.\n\n\n    this.connection.peerConnection = peerConnection;\n    if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media && options._stream) this._addTracksToConnection(options._stream, peerConnection); // What do we need to do now?\n\n    if (options.originator) {\n      if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n        var dataConnection = this.connection;\n        var config = {\n          ordered: !!options.reliable\n        };\n        var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n        dataConnection.initialize(dataChannel);\n      }\n\n      this._makeOffer();\n    } else this.handleSDP(\"OFFER\", options.sdp);\n  };\n  /** Start a PC. */\n\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._startPeerConnection = function () {\n    $1615705ecc6adca3$exports.default.log(\"Creating RTCPeerConnection.\");\n    var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n\n    this._setupListeners(peerConnection);\n\n    return peerConnection;\n  };\n  /** Set up various WebRTC listeners. */\n\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._setupListeners = function (peerConnection) {\n    var _this = this;\n\n    var peerId = this.connection.peer;\n    var connectionId = this.connection.connectionId;\n    var connectionType = this.connection.type;\n    var provider = this.connection.provider; // ICE CANDIDATES.\n\n    $1615705ecc6adca3$exports.default.log(\"Listening for ICE candidates.\");\n\n    peerConnection.onicecandidate = function (evt) {\n      if (!evt.candidate || !evt.candidate.candidate) return;\n      $1615705ecc6adca3$exports.default.log(\"Received ICE candidates for \".concat(peerId, \":\"), evt.candidate);\n      provider.socket.send({\n        type: $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,\n        payload: {\n          candidate: evt.candidate,\n          type: connectionType,\n          connectionId: connectionId\n        },\n        dst: peerId\n      });\n    };\n\n    peerConnection.oniceconnectionstatechange = function () {\n      switch (peerConnection.iceConnectionState) {\n        case \"failed\":\n          $1615705ecc6adca3$exports.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n\n          _this.connection.emit(\"error\", new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"closed\":\n          $1615705ecc6adca3$exports.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n\n          _this.connection.emit(\"error\", new Error(\"Connection to \" + peerId + \" closed.\"));\n\n          _this.connection.close();\n\n          break;\n\n        case \"disconnected\":\n          $1615705ecc6adca3$exports.default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n          break;\n\n        case \"completed\":\n          peerConnection.onicecandidate = $06cb531ed7840f78$export$7debb50ef11d5e0b.noop;\n          break;\n      }\n\n      _this.connection.emit(\"iceStateChanged\", peerConnection.iceConnectionState);\n    }; // DATACONNECTION.\n\n\n    $1615705ecc6adca3$exports.default.log(\"Listening for data channel\"); // Fired between offer and answer, so options should already be saved\n    // in the options hash.\n\n    peerConnection.ondatachannel = function (evt) {\n      $1615705ecc6adca3$exports.default.log(\"Received data channel\");\n      var dataChannel = evt.channel;\n      var connection = provider.getConnection(peerId, connectionId);\n      connection.initialize(dataChannel);\n    }; // MEDIACONNECTION.\n\n\n    $1615705ecc6adca3$exports.default.log(\"Listening for remote stream\");\n\n    peerConnection.ontrack = function (evt) {\n      $1615705ecc6adca3$exports.default.log(\"Received remote stream\");\n      var stream = evt.streams[0];\n      var connection = provider.getConnection(peerId, connectionId);\n\n      if (connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n        var mediaConnection = connection;\n\n        _this._addStreamToMediaConnection(stream, mediaConnection);\n      }\n    };\n  };\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.cleanup = function () {\n    $1615705ecc6adca3$exports.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n    var peerConnection = this.connection.peerConnection;\n    if (!peerConnection) return;\n    this.connection.peerConnection = null; //unsubscribe from all PeerConnection's events\n\n    peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function () {};\n\n    var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n    var dataChannelNotClosed = false;\n\n    if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n      var dataConnection = this.connection;\n      var dataChannel = dataConnection.dataChannel;\n      if (dataChannel) dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n    }\n\n    if (peerConnectionNotClosed || dataChannelNotClosed) peerConnection.close();\n  };\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeOffer = function () {\n    return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n      return $77f14d3e81888156$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createOffer(this.connection.options.constraints)];\n\n          case 2:\n            offer = _a.sent();\n            $1615705ecc6adca3$exports.default.log(\"Created offer.\");\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(offer)];\n\n          case 4:\n            _a.sent();\n\n            $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", offer, \"for:\".concat(this.connection.peer));\n            payload = {\n              sdp: offer,\n              type: this.connection.type,\n              connectionId: this.connection.connectionId,\n              metadata: this.connection.metadata,\n              browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n            };\n\n            if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n              dataConnection = this.connection;\n              payload = $77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({}, payload), {\n                label: dataConnection.label,\n                reliable: dataConnection.reliable,\n                serialization: dataConnection.serialization\n              });\n            }\n\n            provider.socket.send({\n              type: $60fadef21a2daafc$export$adb4a1754da6f10d.Offer,\n              payload: payload,\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_2 = _a.sent(); // TODO: investigate why _makeOffer is being called from the answer\n\n            if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n              provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_2);\n              $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_2);\n            }\n\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_1 = _a.sent();\n            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_1);\n            $1615705ecc6adca3$exports.default.log(\"Failed to createOffer, \", err_1_1);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeAnswer = function () {\n    return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, answer, err_3, err_1_2;\n      return $77f14d3e81888156$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 7,, 8]);\n\n            return [4\n            /*yield*/\n            , peerConnection.createAnswer()];\n\n          case 2:\n            answer = _a.sent();\n            $1615705ecc6adca3$exports.default.log(\"Created answer.\");\n            if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n            _a.label = 3;\n\n          case 3:\n            _a.trys.push([3, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setLocalDescription(answer)];\n\n          case 4:\n            _a.sent();\n\n            $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", answer, \"for:\".concat(this.connection.peer));\n            provider.socket.send({\n              type: $60fadef21a2daafc$export$adb4a1754da6f10d.Answer,\n              payload: {\n                sdp: answer,\n                type: this.connection.type,\n                connectionId: this.connection.connectionId,\n                browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n              },\n              dst: this.connection.peer\n            });\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_3 = _a.sent();\n            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_3);\n            $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_3);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [3\n            /*break*/\n            , 8];\n\n          case 7:\n            err_1_2 = _a.sent();\n            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_2);\n            $1615705ecc6adca3$exports.default.log(\"Failed to create answer, \", err_1_2);\n            return [3\n            /*break*/\n            , 8];\n\n          case 8:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle an SDP. */\n\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleSDP = function (type, sdp) {\n    return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function () {\n      var peerConnection, provider, self, err_4;\n      return $77f14d3e81888156$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            sdp = new RTCSessionDescription(sdp);\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            $1615705ecc6adca3$exports.default.log(\"Setting remote description\", sdp);\n            self = this;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 5,, 6]);\n\n            return [4\n            /*yield*/\n            , peerConnection.setRemoteDescription(sdp)];\n\n          case 2:\n            _a.sent();\n\n            $1615705ecc6adca3$exports.default.log(\"Set remoteDescription:\".concat(type, \" for:\").concat(this.connection.peer));\n            if (!(type === \"OFFER\")) return [3\n            /*break*/\n            , 4];\n            return [4\n            /*yield*/\n            , self._makeAnswer()];\n\n          case 3:\n            _a.sent();\n\n            _a.label = 4;\n\n          case 4:\n            return [3\n            /*break*/\n            , 6];\n\n          case 5:\n            err_4 = _a.sent();\n            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_4);\n            $1615705ecc6adca3$exports.default.log(\"Failed to setRemoteDescription, \", err_4);\n            return [3\n            /*break*/\n            , 6];\n\n          case 6:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** Handle a candidate. */\n\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleCandidate = function (ice) {\n    return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function () {\n      var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n      return $77f14d3e81888156$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            $1615705ecc6adca3$exports.default.log(\"handleCandidate:\", ice);\n            candidate = ice.candidate;\n            sdpMLineIndex = ice.sdpMLineIndex;\n            sdpMid = ice.sdpMid;\n            peerConnection = this.connection.peerConnection;\n            provider = this.connection.provider;\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , peerConnection.addIceCandidate(new RTCIceCandidate({\n              sdpMid: sdpMid,\n              sdpMLineIndex: sdpMLineIndex,\n              candidate: candidate\n            }))];\n\n          case 2:\n            _a.sent();\n\n            $1615705ecc6adca3$exports.default.log(\"Added ICE candidate for:\".concat(this.connection.peer));\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            err_5 = _a.sent();\n            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_5);\n            $1615705ecc6adca3$exports.default.log(\"Failed to handleCandidate, \", err_5);\n            return [3\n            /*break*/\n            , 4];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addTracksToConnection = function (stream, peerConnection) {\n    $1615705ecc6adca3$exports.default.log(\"add tracks from stream \".concat(stream.id, \" to peer connection\"));\n    if (!peerConnection.addTrack) return $1615705ecc6adca3$exports.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n    stream.getTracks().forEach(function (track) {\n      peerConnection.addTrack(track, stream);\n    });\n  };\n\n  $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addStreamToMediaConnection = function (stream, mediaConnection) {\n    $1615705ecc6adca3$exports.default.log(\"add stream \".concat(stream.id, \" to media connection \").concat(mediaConnection.connectionId));\n    mediaConnection.addStream(stream);\n  };\n\n  return $77f14d3e81888156$export$89e6bb5ad64bf4a;\n}();\n\nvar $0b3b332fd86c5202$exports = {};\n$parcel$export($0b3b332fd86c5202$exports, \"BaseConnection\", () => $0b3b332fd86c5202$export$23a2a68283c24d80, v => $0b3b332fd86c5202$export$23a2a68283c24d80 = v);\n\nvar $0b3b332fd86c5202$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $0b3b332fd86c5202$export$23a2a68283c24d80 =\n/** @class */\nfunction (_super) {\n  $0b3b332fd86c5202$var$__extends($0b3b332fd86c5202$export$23a2a68283c24d80, _super);\n\n  function $0b3b332fd86c5202$export$23a2a68283c24d80(peer, provider, options) {\n    var _this = _super.call(this) || this;\n\n    _this.peer = peer;\n    _this.provider = provider;\n    _this.options = options;\n    _this._open = false;\n    _this.metadata = options.metadata;\n    return _this;\n  }\n\n  Object.defineProperty($0b3b332fd86c5202$export$23a2a68283c24d80.prototype, \"open\", {\n    get: function () {\n      return this._open;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return $0b3b332fd86c5202$export$23a2a68283c24d80;\n}($ac9b757d51178e15$exports.EventEmitter);\n\nvar $353dee38f9ab557b$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $353dee38f9ab557b$var$__assign = undefined && undefined.__assign || function () {\n  $353dee38f9ab557b$var$__assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return $353dee38f9ab557b$var$__assign.apply(this, arguments);\n};\n\nvar $353dee38f9ab557b$var$__values = undefined && undefined.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps the streaming interface between two Peers.\n */\n\n\nvar $353dee38f9ab557b$export$4a84e95a2324ac29 =\n/** @class */\nfunction (_super) {\n  $353dee38f9ab557b$var$__extends($353dee38f9ab557b$export$4a84e95a2324ac29, _super);\n\n  function $353dee38f9ab557b$export$4a84e95a2324ac29(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this._localStream = _this.options._stream;\n    _this.connectionId = _this.options.connectionId || $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n    _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n    if (_this._localStream) _this._negotiator.startConnection({\n      _stream: _this._localStream,\n      originator: true\n    });\n    return _this;\n  }\n\n  Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"type\", {\n    get: function () {\n      return $60fadef21a2daafc$export$3157d57b4135e3bc.Media;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"localStream\", {\n    get: function () {\n      return this._localStream;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"remoteStream\", {\n    get: function () {\n      return this._remoteStream;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.addStream = function (remoteStream) {\n    $1615705ecc6adca3$exports.default.log(\"Receiving stream\", remoteStream);\n    this._remoteStream = remoteStream;\n\n    _super.prototype.emit.call(this, \"stream\", remoteStream); // Should we call this `open`?\n\n  };\n\n  $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.handleMessage = function (message) {\n    var type = message.type;\n    var payload = message.payload;\n\n    switch (message.type) {\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n        // Forward to negotiator\n        this._negotiator.handleSDP(type, payload.sdp);\n\n        this._open = true;\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\".concat(type, \" from peer:\").concat(this.peer));\n        break;\n    }\n  };\n\n  $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.answer = function (stream, options) {\n    var e_1, _a;\n\n    if (options === void 0) options = {};\n\n    if (this._localStream) {\n      $1615705ecc6adca3$exports.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n      return;\n    }\n\n    this._localStream = stream;\n    if (options && options.sdpTransform) this.options.sdpTransform = options.sdpTransform;\n\n    this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({}, this.options._payload), {\n      _stream: stream\n    })); // Retrieve lost messages stored because PeerConnection not set up.\n\n\n    var messages = this.provider._getMessages(this.connectionId);\n\n    try {\n      for (var messages_1 = $353dee38f9ab557b$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n        var message = messages_1_1.value;\n        this.handleMessage(message);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    this._open = true;\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.close = function () {\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    this._localStream = null;\n    this._remoteStream = null;\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.options && this.options._stream) this.options._stream = null;\n    if (!this.open) return;\n    this._open = false;\n\n    _super.prototype.emit.call(this, \"close\");\n  };\n\n  $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX = \"mc_\";\n  return $353dee38f9ab557b$export$4a84e95a2324ac29;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\nvar $3356170d7bce7f20$exports = {};\n$parcel$export($3356170d7bce7f20$exports, \"DataConnection\", () => $3356170d7bce7f20$export$d365f7ad9d7df9c9, v => $3356170d7bce7f20$export$d365f7ad9d7df9c9 = v);\nvar $3014d862dcc9946b$exports = {};\n$parcel$export($3014d862dcc9946b$exports, \"EncodingQueue\", () => $3014d862dcc9946b$export$c6913ae0ed687038, v => $3014d862dcc9946b$export$c6913ae0ed687038 = v);\n\nvar $3014d862dcc9946b$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $3014d862dcc9946b$export$c6913ae0ed687038 =\n/** @class */\nfunction (_super) {\n  $3014d862dcc9946b$var$__extends($3014d862dcc9946b$export$c6913ae0ed687038, _super);\n\n  function $3014d862dcc9946b$export$c6913ae0ed687038() {\n    var _this = _super.call(this) || this;\n\n    _this.fileReader = new FileReader();\n    _this._queue = [];\n    _this._processing = false;\n\n    _this.fileReader.onload = function (evt) {\n      _this._processing = false;\n      if (evt.target) _this.emit(\"done\", evt.target.result);\n\n      _this.doNextTask();\n    };\n\n    _this.fileReader.onerror = function (evt) {\n      $1615705ecc6adca3$exports.default.error(\"EncodingQueue error:\", evt);\n      _this._processing = false;\n\n      _this.destroy();\n\n      _this.emit(\"error\", evt);\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"queue\", {\n    get: function () {\n      return this._queue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"size\", {\n    get: function () {\n      return this.queue.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"processing\", {\n    get: function () {\n      return this._processing;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  $3014d862dcc9946b$export$c6913ae0ed687038.prototype.enque = function (blob) {\n    this.queue.push(blob);\n    if (this.processing) return;\n    this.doNextTask();\n  };\n\n  $3014d862dcc9946b$export$c6913ae0ed687038.prototype.destroy = function () {\n    this.fileReader.abort();\n    this._queue = [];\n  };\n\n  $3014d862dcc9946b$export$c6913ae0ed687038.prototype.doNextTask = function () {\n    if (this.size === 0) return;\n    if (this.processing) return;\n    this._processing = true;\n    this.fileReader.readAsArrayBuffer(this.queue.shift());\n  };\n\n  return $3014d862dcc9946b$export$c6913ae0ed687038;\n}($ac9b757d51178e15$exports.EventEmitter);\n\nvar $3356170d7bce7f20$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $3356170d7bce7f20$var$__values = undefined && undefined.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps a DataChannel between two Peers.\n */\n\n\nvar $3356170d7bce7f20$export$d365f7ad9d7df9c9 =\n/** @class */\nfunction (_super) {\n  $3356170d7bce7f20$var$__extends($3356170d7bce7f20$export$d365f7ad9d7df9c9, _super);\n\n  function $3356170d7bce7f20$export$d365f7ad9d7df9c9(peerId, provider, options) {\n    var _this = _super.call(this, peerId, provider, options) || this;\n\n    _this.stringify = JSON.stringify;\n    _this.parse = JSON.parse;\n    _this._buffer = [];\n    _this._bufferSize = 0;\n    _this._buffering = false;\n    _this._chunkedData = {};\n    _this._encodingQueue = new $3014d862dcc9946b$exports.EncodingQueue();\n    _this.connectionId = _this.options.connectionId || $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n    _this.label = _this.options.label || _this.connectionId;\n    _this.serialization = _this.options.serialization || $60fadef21a2daafc$export$89f507cf986a947.Binary;\n    _this.reliable = !!_this.options.reliable;\n\n    _this._encodingQueue.on(\"done\", function (ab) {\n      _this._bufferedSend(ab);\n    });\n\n    _this._encodingQueue.on(\"error\", function () {\n      $1615705ecc6adca3$exports.default.error(\"DC#\".concat(_this.connectionId, \": Error occured in encoding from blob to arraybuffer, close DC\"));\n\n      _this.close();\n    });\n\n    _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n\n    _this._negotiator.startConnection(_this.options._payload || {\n      originator: true\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"type\", {\n    get: function () {\n      return $60fadef21a2daafc$export$3157d57b4135e3bc.Data;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"dataChannel\", {\n    get: function () {\n      return this._dc;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"bufferSize\", {\n    get: function () {\n      return this._bufferSize;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /** Called by the Negotiator when the DataChannel is ready. */\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.initialize = function (dc) {\n    this._dc = dc;\n\n    this._configureDataChannel();\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._configureDataChannel = function () {\n    var _this = this;\n\n    if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob || $06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable) this.dataChannel.binaryType = \"arraybuffer\";\n\n    this.dataChannel.onopen = function () {\n      $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc connection success\"));\n      _this._open = true;\n\n      _this.emit(\"open\");\n    };\n\n    this.dataChannel.onmessage = function (e) {\n      $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc onmessage:\"), e.data);\n\n      _this._handleDataMessage(e);\n    };\n\n    this.dataChannel.onclose = function () {\n      $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc closed for:\"), _this.peer);\n\n      _this.close();\n    };\n  }; // Handles a DataChannel message.\n\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleDataMessage = function (_a) {\n    var _this = this;\n\n    var data = _a.data;\n    var datatype = data.constructor;\n    var isBinarySerialization = this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8;\n    var deserializedData = data;\n\n    if (isBinarySerialization) {\n      if (datatype === Blob) {\n        // Datatype should never be blob\n        $06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(data, function (ab) {\n          var unpackedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab);\n\n          _this.emit(\"data\", unpackedData);\n        });\n        return;\n      } else if (datatype === ArrayBuffer) deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(data);else if (datatype === String) {\n        // String fallback for binary data for browsers that don't support binary yet\n        var ab1 = $06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(data);\n        deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab1);\n      }\n    } else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) deserializedData = this.parse(data); // Check if we've chunked--if so, piece things back together.\n    // We're guaranteed that this isn't 0.\n\n\n    if (deserializedData.__peerData) {\n      this._handleChunk(deserializedData);\n\n      return;\n    }\n\n    _super.prototype.emit.call(this, \"data\", deserializedData);\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleChunk = function (data) {\n    var id = data.__peerData;\n    var chunkInfo = this._chunkedData[id] || {\n      data: [],\n      count: 0,\n      total: data.total\n    };\n    chunkInfo.data[data.n] = data.data;\n    chunkInfo.count++;\n    this._chunkedData[id] = chunkInfo;\n\n    if (chunkInfo.total === chunkInfo.count) {\n      // Clean up before making the recursive call to `_handleDataMessage`.\n      delete this._chunkedData[id]; // We've received all the chunks--time to construct the complete data.\n\n      var data_1 = new Blob(chunkInfo.data);\n\n      this._handleDataMessage({\n        data: data_1\n      });\n    }\n  };\n  /**\n   * Exposed functionality for users.\n   */\n\n  /** Allows user to close connection. */\n\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.close = function () {\n    this._buffer = [];\n    this._bufferSize = 0;\n    this._chunkedData = {};\n\n    if (this._negotiator) {\n      this._negotiator.cleanup();\n\n      this._negotiator = null;\n    }\n\n    if (this.provider) {\n      this.provider._removeConnection(this);\n\n      this.provider = null;\n    }\n\n    if (this.dataChannel) {\n      this.dataChannel.onopen = null;\n      this.dataChannel.onmessage = null;\n      this.dataChannel.onclose = null;\n      this._dc = null;\n    }\n\n    if (this._encodingQueue) {\n      this._encodingQueue.destroy();\n\n      this._encodingQueue.removeAllListeners();\n\n      this._encodingQueue = null;\n    }\n\n    if (!this.open) return;\n    this._open = false;\n\n    _super.prototype.emit.call(this, \"close\");\n  };\n  /** Allows user to send data. */\n\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.send = function (data, chunked) {\n    if (!this.open) {\n      _super.prototype.emit.call(this, \"error\", new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n\n      return;\n    }\n\n    if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) this._bufferedSend(this.stringify(data));else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8) {\n      var blob = $06cb531ed7840f78$export$7debb50ef11d5e0b.pack(data);\n\n      if (!chunked && blob.size > $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU) {\n        this._sendChunks(blob);\n\n        return;\n      }\n\n      if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob) // We only do this if we really need to (e.g. blobs are not supported),\n        // because this conversion is costly.\n        this._encodingQueue.enque(blob);else this._bufferedSend(blob);\n    } else this._bufferedSend(data);\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._bufferedSend = function (msg) {\n    if (this._buffering || !this._trySend(msg)) {\n      this._buffer.push(msg);\n\n      this._bufferSize = this._buffer.length;\n    }\n  }; // Returns true if the send succeeds.\n\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._trySend = function (msg) {\n    var _this = this;\n\n    if (!this.open) return false;\n\n    if (this.dataChannel.bufferedAmount > $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT) {\n      this._buffering = true;\n      setTimeout(function () {\n        _this._buffering = false;\n\n        _this._tryBuffer();\n      }, 50);\n      return false;\n    }\n\n    try {\n      this.dataChannel.send(msg);\n    } catch (e) {\n      $1615705ecc6adca3$exports.default.error(\"DC#:\".concat(this.connectionId, \" Error when sending:\"), e);\n      this._buffering = true;\n      this.close();\n      return false;\n    }\n\n    return true;\n  }; // Try to send the first message in the buffer.\n\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._tryBuffer = function () {\n    if (!this.open) return;\n    if (this._buffer.length === 0) return;\n    var msg = this._buffer[0];\n\n    if (this._trySend(msg)) {\n      this._buffer.shift();\n\n      this._bufferSize = this._buffer.length;\n\n      this._tryBuffer();\n    }\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._sendChunks = function (blob) {\n    var e_1, _a;\n\n    var blobs = $06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(blob);\n    $1615705ecc6adca3$exports.default.log(\"DC#\".concat(this.connectionId, \" Try to send \").concat(blobs.length, \" chunks...\"));\n\n    try {\n      for (var blobs_1 = $3356170d7bce7f20$var$__values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()) {\n        var blob_1 = blobs_1_1.value;\n        this.send(blob_1, true);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.handleMessage = function (message) {\n    var payload = message.payload;\n\n    switch (message.type) {\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n        this._negotiator.handleSDP(message.type, payload.sdp);\n\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n        this._negotiator.handleCandidate(payload.candidate);\n\n        break;\n\n      default:\n        $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n        break;\n    }\n  };\n\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX = \"dc_\";\n  $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT = 8388608;\n  return $3356170d7bce7f20$export$d365f7ad9d7df9c9;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\nvar $9e85b3e1327369e6$exports = {};\n$parcel$export($9e85b3e1327369e6$exports, \"API\", () => $9e85b3e1327369e6$export$2c4e825dc9120f87, v => $9e85b3e1327369e6$export$2c4e825dc9120f87 = v);\n\nvar $9e85b3e1327369e6$var$__awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar $9e85b3e1327369e6$var$__generator = undefined && undefined.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar $9e85b3e1327369e6$export$2c4e825dc9120f87 =\n/** @class */\nfunction () {\n  function $9e85b3e1327369e6$export$2c4e825dc9120f87(_options) {\n    this._options = _options;\n  }\n\n  $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype._buildRequest = function (method) {\n    var protocol = this._options.secure ? \"https\" : \"http\";\n    var _a = this._options,\n        host = _a.host,\n        port = _a.port,\n        path = _a.path,\n        key = _a.key;\n    var url = new URL(\"\".concat(protocol, \"://\").concat(host, \":\").concat(port).concat(path).concat(key, \"/\").concat(method)); // TODO: Why timestamp, why random?\n\n    url.searchParams.set(\"ts\", \"\".concat(Date.now()).concat(Math.random()));\n    url.searchParams.set(\"version\", $0d1ed891c5cb27c0$exports.version);\n    return fetch(url.href, {\n      referrerPolicy: this._options.referrerPolicy\n    });\n  };\n  /** Get a unique ID from the server via XHR and initialize with it. */\n\n\n  $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.retrieveId = function () {\n    return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function () {\n      var response, error_1, pathError;\n      return $9e85b3e1327369e6$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n\n            return [4\n            /*yield*/\n            , this._buildRequest(\"id\")];\n\n          case 1:\n            response = _a.sent();\n            if (response.status !== 200) throw new Error(\"Error. Status:\".concat(response.status));\n            return [2\n            /*return*/\n            , response.text()];\n\n          case 2:\n            error_1 = _a.sent();\n            $1615705ecc6adca3$exports.default.error(\"Error retrieving ID\", error_1);\n            pathError = \"\";\n            if (this._options.path === \"/\" && this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n            throw new Error(\"Could not get an ID from the server.\" + pathError);\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n  /** @deprecated */\n\n\n  $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.listAllPeers = function () {\n    return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function () {\n      var response, helpfulError, error_2;\n      return $9e85b3e1327369e6$var$__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            _a.trys.push([0, 2,, 3]);\n\n            return [4\n            /*yield*/\n            , this._buildRequest(\"peers\")];\n\n          case 1:\n            response = _a.sent();\n\n            if (response.status !== 200) {\n              if (response.status === 401) {\n                helpfulError = \"\";\n                if (this._options.host === $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";else helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n              }\n\n              throw new Error(\"Error. Status:\".concat(response.status));\n            }\n\n            return [2\n            /*return*/\n            , response.json()];\n\n          case 2:\n            error_2 = _a.sent();\n            $1615705ecc6adca3$exports.default.error(\"Error retrieving list peers\", error_2);\n            throw new Error(\"Could not get list peers from the server.\" + error_2);\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return $9e85b3e1327369e6$export$2c4e825dc9120f87;\n}();\n\nvar $26088d7da5b03f69$var$__extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d1, b1) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d1, b1);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar $26088d7da5b03f69$var$__assign = undefined && undefined.__assign || function () {\n  $26088d7da5b03f69$var$__assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return $26088d7da5b03f69$var$__assign.apply(this, arguments);\n};\n\nvar $26088d7da5b03f69$var$__values = undefined && undefined.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar $26088d7da5b03f69$var$__read = undefined && undefined.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar $26088d7da5b03f69$var$PeerOptions =\n/** @class */\nfunction () {\n  function PeerOptions() {}\n\n  return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */\n\n\nvar $26088d7da5b03f69$export$ecd1fc136c422448 =\n/** @class */\nfunction (_super) {\n  $26088d7da5b03f69$var$__extends($26088d7da5b03f69$export$ecd1fc136c422448, _super);\n\n  function $26088d7da5b03f69$export$ecd1fc136c422448(id1, options) {\n    var _this = _super.call(this) || this;\n\n    _this._id = null;\n    _this._lastServerId = null; // States.\n\n    _this._destroyed = false; // Connections have been killed\n\n    _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n\n    _this._open = false; // Sockets and such are not yet open.\n\n    _this._connections = new Map(); // All connections for this peer.\n\n    _this._lostMessages = new Map(); // src => [list of messages]\n\n    var userId; // Deal with overloading\n\n    if (id1 && id1.constructor == Object) options = id1;else if (id1) userId = id1.toString(); // Configurize options\n\n    options = $26088d7da5b03f69$var$__assign({\n      debug: 0,\n      host: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,\n      port: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,\n      path: \"/\",\n      key: $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY,\n      token: $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),\n      config: $06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,\n      referrerPolicy: \"strict-origin-when-cross-origin\"\n    }, options);\n    _this._options = options; // Detect relative URL host.\n\n    if (_this._options.host === \"/\") _this._options.host = window.location.hostname; // Set path correctly.\n\n    if (_this._options.path) {\n      if (_this._options.path[0] !== \"/\") _this._options.path = \"/\" + _this._options.path;\n      if (_this._options.path[_this._options.path.length - 1] !== \"/\") _this._options.path += \"/\";\n    } // Set whether we use SSL to same as current host\n\n\n    if (_this._options.secure === undefined && _this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = $06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure();else if (_this._options.host == $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = true; // Set a custom log function if present\n\n    if (_this._options.logFunction) $1615705ecc6adca3$exports.default.setLogFunction(_this._options.logFunction);\n    $1615705ecc6adca3$exports.default.logLevel = _this._options.debug || 0;\n    _this._api = new $9e85b3e1327369e6$exports.API(options);\n    _this._socket = _this._createServerConnection(); // Sanity checks\n    // Ensure WebRTC supported\n\n    if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo && !$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data) {\n      _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible, \"The current browser does not support WebRTC\");\n\n      return _this;\n    } // Ensure alphanumeric id\n\n\n    if (!!userId && !$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(userId)) {\n      _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID, \"ID \\\"\".concat(userId, \"\\\" is invalid\"));\n\n      return _this;\n    }\n\n    if (userId) _this._initialize(userId);else _this._api.retrieveId().then(function (id) {\n      return _this._initialize(id);\n    }).catch(function (error) {\n      return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n    });\n    return _this;\n  }\n\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"id\", {\n    /**\n     * The brokering ID of this peer\n     */\n    get: function () {\n      return this._id;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"options\", {\n    get: function () {\n      return this._options;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"open\", {\n    get: function () {\n      return this._open;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"socket\", {\n    get: function () {\n      return this._socket;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"connections\", {\n    /**\n     * A hash of all connections associated with this peer, keyed by the remote peer's ID.\n     * @deprecated\n     * Return type will change from Object to Map<string,[]>\n     */\n    get: function () {\n      var e_1, _a;\n\n      var plainConnections = Object.create(null);\n\n      try {\n        for (var _b = $26088d7da5b03f69$var$__values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var _d = $26088d7da5b03f69$var$__read(_c.value, 2),\n              k = _d[0],\n              v = _d[1];\n\n          plainConnections[k] = v;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      return plainConnections;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"destroyed\", {\n    /**\n     * true if this peer and all of its connections can no longer be used.\n     */\n    get: function () {\n      return this._destroyed;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"disconnected\", {\n    /**\n     * false if there is an active connection to the PeerServer.\n     */\n    get: function () {\n      return this._disconnected;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._createServerConnection = function () {\n    var _this = this;\n\n    var socket = new $31d11a8d122cb4b7$exports.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n    socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, function (data) {\n      _this._handleMessage(data);\n    });\n    socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, function (error) {\n      _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError, error);\n    });\n    socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected, function () {\n      if (_this.disconnected) return;\n\n      _this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network, \"Lost connection to server.\");\n\n      _this.disconnect();\n    });\n    socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close, function () {\n      if (_this.disconnected) return;\n\n      _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed, \"Underlying socket is already closed.\");\n    });\n    return socket;\n  };\n  /** Initialize a connection with the server. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._initialize = function (id) {\n    this._id = id;\n    this.socket.start(id, this._options.token);\n  };\n  /** Handles messages from the server. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._handleMessage = function (message) {\n    var e_2, _a;\n\n    var type = message.type;\n    var payload = message.payload;\n    var peerId = message.src;\n\n    switch (type) {\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:\n        this._lastServerId = this.id;\n        this._open = true;\n        this.emit(\"open\", this.id);\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:\n        this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, payload.msg);\n\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:\n        this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID, \"ID \\\"\".concat(this.id, \"\\\" is taken\"));\n\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:\n        this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey, \"API KEY \\\"\".concat(this._options.key, \"\\\" is invalid\"));\n\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:\n        $1615705ecc6adca3$exports.default.log(\"Received leave message from \".concat(peerId));\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:\n        this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable, \"Could not connect to peer \".concat(peerId));\n        break;\n\n      case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:\n        // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n        var connectionId = payload.connectionId;\n        var connection = this.getConnection(peerId, connectionId);\n\n        if (connection) {\n          connection.close();\n          $1615705ecc6adca3$exports.default.warn(\"Offer received for existing Connection ID:\".concat(connectionId));\n        } // Create a new connection.\n\n\n        if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n          var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peerId, this, {\n            connectionId: connectionId,\n            _payload: payload,\n            metadata: payload.metadata\n          });\n          connection = mediaConnection;\n\n          this._addConnection(peerId, connection);\n\n          this.emit(\"call\", mediaConnection);\n        } else if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n          var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peerId, this, {\n            connectionId: connectionId,\n            _payload: payload,\n            metadata: payload.metadata,\n            label: payload.label,\n            serialization: payload.serialization,\n            reliable: payload.reliable\n          });\n          connection = dataConnection;\n\n          this._addConnection(peerId, connection);\n\n          this.emit(\"connection\", dataConnection);\n        } else {\n          $1615705ecc6adca3$exports.default.warn(\"Received malformed connection type:\".concat(payload.type));\n          return;\n        } // Find messages.\n\n\n        var messages = this._getMessages(connectionId);\n\n        try {\n          for (var messages_1 = $26088d7da5b03f69$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()) {\n            var message_1 = messages_1_1.value;\n            connection.handleMessage(message_1);\n          }\n        } catch (e_2_1) {\n          e_2 = {\n            error: e_2_1\n          };\n        } finally {\n          try {\n            if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n\n        break;\n\n      default:\n        if (!payload) {\n          $1615705ecc6adca3$exports.default.warn(\"You received a malformed message from \".concat(peerId, \" of type \").concat(type));\n          return;\n        }\n\n        var connectionId = payload.connectionId;\n        var connection = this.getConnection(peerId, connectionId);\n        if (connection && connection.peerConnection) // Pass it on.\n          connection.handleMessage(message);else if (connectionId) // Store for possible later use\n          this._storeMessage(connectionId, message);else $1615705ecc6adca3$exports.default.warn(\"You received an unrecognized message:\", message);\n        break;\n    }\n  };\n  /** Stores messages without a set up connection, to be claimed later. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._storeMessage = function (connectionId, message) {\n    if (!this._lostMessages.has(connectionId)) this._lostMessages.set(connectionId, []);\n\n    this._lostMessages.get(connectionId).push(message);\n  };\n  /** Retrieve messages from lost message store */\n  //TODO Change it to private\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._getMessages = function (connectionId) {\n    var messages = this._lostMessages.get(connectionId);\n\n    if (messages) {\n      this._lostMessages.delete(connectionId);\n\n      return messages;\n    }\n\n    return [];\n  };\n  /**\n   * Connects to the remote peer specified by id and returns a data connection.\n   * @param peer The brokering ID of the remote peer (their peer.id).\n   * @param options for specifying details about Peer Connection\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.connect = function (peer, options) {\n    if (options === void 0) options = {};\n\n    if (this.disconnected) {\n      $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n      this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peer, this, options);\n\n    this._addConnection(peer, dataConnection);\n\n    return dataConnection;\n  };\n  /**\n   * Calls the remote peer specified by id and returns a media connection.\n   * @param peer The brokering ID of the remote peer (their peer.id).\n   * @param stream The caller's media stream\n   * @param options Metadata associated with the connection, passed in by whoever initiated the connection.\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.call = function (peer, stream, options) {\n    if (options === void 0) options = {};\n\n    if (this.disconnected) {\n      $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n      this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n      return;\n    }\n\n    if (!stream) {\n      $1615705ecc6adca3$exports.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n      return;\n    }\n\n    var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peer, this, $26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({}, options), {\n      _stream: stream\n    }));\n\n    this._addConnection(peer, mediaConnection);\n\n    return mediaConnection;\n  };\n  /** Add a data/media connection to this peer. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._addConnection = function (peerId, connection) {\n    $1615705ecc6adca3$exports.default.log(\"add connection \".concat(connection.type, \":\").concat(connection.connectionId, \" to peerId:\").concat(peerId));\n    if (!this._connections.has(peerId)) this._connections.set(peerId, []);\n\n    this._connections.get(peerId).push(connection);\n  }; //TODO should be private\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._removeConnection = function (connection) {\n    var connections = this._connections.get(connection.peer);\n\n    if (connections) {\n      var index = connections.indexOf(connection);\n      if (index !== -1) connections.splice(index, 1);\n    } //remove from lost messages\n\n\n    this._lostMessages.delete(connection.connectionId);\n  };\n  /** Retrieve a data/media connection for this peer. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.getConnection = function (peerId, connectionId) {\n    var e_3, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) return null;\n\n    try {\n      for (var connections_1 = $26088d7da5b03f69$var$__values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()) {\n        var connection = connections_1_1.value;\n        if (connection.connectionId === connectionId) return connection;\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return null;\n  };\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._delayedAbort = function (type, message) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this._abort(type, message);\n    }, 0);\n  };\n  /**\n   * Emits an error message and destroys the Peer.\n   * The Peer is not destroyed if it's in a disconnected state, in which case\n   * it retains its disconnected state and its existing connections.\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._abort = function (type, message) {\n    $1615705ecc6adca3$exports.default.error(\"Aborting!\");\n    this.emitError(type, message);\n    if (!this._lastServerId) this.destroy();else this.disconnect();\n  };\n  /** Emits a typed error message. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.emitError = function (type, err) {\n    $1615705ecc6adca3$exports.default.error(\"Error:\", err);\n    var error;\n    if (typeof err === \"string\") error = new Error(err);else error = err;\n    error.type = type;\n    this.emit(\"error\", error);\n  };\n  /**\n   * Destroys the Peer: closes all active connections as well as the connection\n   *  to the server.\n   * Warning: The peer can no longer create or accept connections after being\n   *  destroyed.\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.destroy = function () {\n    if (this.destroyed) return;\n    $1615705ecc6adca3$exports.default.log(\"Destroy peer with ID:\".concat(this.id));\n    this.disconnect();\n\n    this._cleanup();\n\n    this._destroyed = true;\n    this.emit(\"close\");\n  };\n  /** Disconnects every connection on this peer. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanup = function () {\n    var e_4, _a;\n\n    try {\n      for (var _b = $26088d7da5b03f69$var$__values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var peerId = _c.value;\n\n        this._cleanupPeer(peerId);\n\n        this._connections.delete(peerId);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    this.socket.removeAllListeners();\n  };\n  /** Closes all connections to this peer. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanupPeer = function (peerId) {\n    var e_5, _a;\n\n    var connections = this._connections.get(peerId);\n\n    if (!connections) return;\n\n    try {\n      for (var connections_2 = $26088d7da5b03f69$var$__values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()) {\n        var connection = connections_2_1.value;\n        connection.close();\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n  };\n  /**\n   * Disconnects the Peer's connection to the PeerServer. Does not close any\n   *  active connections.\n   * Warning: The peer can no longer create or accept connections after being\n   *  disconnected. It also cannot reconnect to the server.\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.disconnect = function () {\n    if (this.disconnected) return;\n    var currentId = this.id;\n    $1615705ecc6adca3$exports.default.log(\"Disconnect peer with ID:\".concat(currentId));\n    this._disconnected = true;\n    this._open = false;\n    this.socket.close();\n    this._lastServerId = currentId;\n    this._id = null;\n    this.emit(\"disconnected\", currentId);\n  };\n  /** Attempts to reconnect with the same ID. */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.reconnect = function () {\n    if (this.disconnected && !this.destroyed) {\n      $1615705ecc6adca3$exports.default.log(\"Attempting reconnection to server with ID \".concat(this._lastServerId));\n      this._disconnected = false;\n\n      this._initialize(this._lastServerId);\n    } else if (this.destroyed) throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");else if (!this.disconnected && !this.open) // Do nothing. We're still connecting the first time.\n      $1615705ecc6adca3$exports.default.error(\"In a hurry? We're still trying to make the initial connection!\");else throw new Error(\"Peer \".concat(this.id, \" cannot reconnect because it is not disconnected from the server!\"));\n  };\n  /**\n   * Get a list of available peer IDs. If you're running your own server, you'll\n   * want to set allow_discovery: true in the PeerServer options. If you're using\n   * the cloud server, email team@peerjs.com to get the functionality enabled for\n   * your key.\n   */\n\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.prototype.listAllPeers = function (cb) {\n    var _this = this;\n\n    if (cb === void 0) cb = function (_) {};\n\n    this._api.listAllPeers().then(function (peers) {\n      return cb(peers);\n    }).catch(function (error) {\n      return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n    });\n  };\n\n  $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY = \"peerjs\";\n  return $26088d7da5b03f69$export$ecd1fc136c422448;\n}($ac9b757d51178e15$exports.EventEmitter);\n\nvar $70d766613f57b014$export$2e2bcd8739ae039 = $26088d7da5b03f69$exports.Peer;\nexport { $70d766613f57b014$export$2e2bcd8739ae039 as default, $26088d7da5b03f69$export$ecd1fc136c422448 as Peer, $06cb531ed7840f78$export$7debb50ef11d5e0b as util };","map":{"version":3,"names":["$kKvpS$peerjsjsbinarypack","$kKvpS$webrtcadapter","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$af8cf1f663f490f4$var$webRTCAdapter","default","$af8cf1f663f490f4$export$25be9502477c137d","class_1","isIOS","includes","navigator","platform","supportedBrowsers","minFirefoxVersion","minChromeVersion","minSafariVersion","prototype","isWebRTCSupported","RTCPeerConnection","isBrowserSupported","browser","getBrowser","version","getVersion","validBrowser","browserDetails","isUnifiedPlanSupported","window","RTCRtpTransceiver","tempPc","supported","addTransceiver","close","toString","concat","$06cb531ed7840f78$var$DEFAULT_CONFIG","iceServers","urls","username","credential","sdpSemantics","$06cb531ed7840f78$var$Util","Util","CLOUD_HOST","CLOUD_PORT","chunkedBrowsers","Chrome","chrome","chunkedMTU","defaultConfig","browserVersion","supports","webRTC","audioVideo","data","binaryBlob","reliable","pc","dc","createDataChannel","ordered","binaryType","pack","unpack","_dataCount","noop","validateId","id","test","chunk","blob","chunks","size","total","Math","ceil","$06cb531ed7840f78$export$7debb50ef11d5e0b","index","start","end","min","b","slice","__peerData","push","blobToArrayBuffer","cb","fr","FileReader","onload","evt","target","result","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","Uint8Array","length","i","charCodeAt","buffer","randomToken","random","isSecure","location","protocol","$26088d7da5b03f69$exports","$26088d7da5b03f69$export$ecd1fc136c422448","$ac9b757d51178e15$exports","$ac9b757d51178e15$var$has","hasOwnProperty","$ac9b757d51178e15$var$prefix","$ac9b757d51178e15$var$Events","create","__proto__","$ac9b757d51178e15$var$EE","fn","context","once","$ac9b757d51178e15$var$addListener","emitter","event","TypeError","listener","_events","_eventsCount","$ac9b757d51178e15$var$clearEvent","$ac9b757d51178e15$var$EventEmitter","eventNames","names","events","name","call","getOwnPropertySymbols","listeners","handlers","l","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","len","arguments","args","removeListener","undefined","apply","j","on","removeAllListeners","off","addListener","prefixed","EventEmitter","$1615705ecc6adca3$exports","$1615705ecc6adca3$export$243e62d78d3b544d","$1615705ecc6adca3$export$2e2bcd8739ae039","$1615705ecc6adca3$var$__read","__read","o","m","Symbol","iterator","r","ar","next","done","value","error","$1615705ecc6adca3$var$__spreadArray","__spreadArray","to","from","$1615705ecc6adca3$var$LOG_PREFIX","$1615705ecc6adca3$var$Logger","Logger","_logLevel","Disabled","logLevel","log","_i","All","_print","warn","Warnings","Errors","setLogFunction","rest","copy","Error","message","console","$31d11a8d122cb4b7$exports","$31d11a8d122cb4b7$export$4798917dbf149b79","$60fadef21a2daafc$export$3157d57b4135e3bc","$60fadef21a2daafc$export$9547aaa2e39030ff","$60fadef21a2daafc$export$89f507cf986a947","$60fadef21a2daafc$export$3b5c4a4b6354f023","$60fadef21a2daafc$export$adb4a1754da6f10d","$0d1ed891c5cb27c0$exports","JSON","parse","$31d11a8d122cb4b7$var$__extends","__extends","extendStatics","d1","b1","setPrototypeOf","d","p","String","__","constructor","$31d11a8d122cb4b7$var$__read","$31d11a8d122cb4b7$var$__spreadArray","$31d11a8d122cb4b7$var$__values","__values","_super","secure","host","port","path","key","pingInterval","_this","_disconnected","_messagesQueue","wsProtocol","_baseUrl","token","_id","wsUrl","_socket","WebSocket","onmessage","Message","onclose","_cleanup","Disconnected","onopen","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","setTimeout","_sendHeartbeat","_wsOpen","stringify","type","Heartbeat","send","readyState","e_1","_a","copiedQueue","copiedQueue_1","copiedQueue_1_1","e_1_1","return","clearTimeout","$353dee38f9ab557b$exports","$353dee38f9ab557b$export$4a84e95a2324ac29","$77f14d3e81888156$exports","$77f14d3e81888156$export$89e6bb5ad64bf4a","$77f14d3e81888156$var$__assign","__assign","assign","t","$77f14d3e81888156$var$__awaiter","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","rejected","then","$77f14d3e81888156$var$__generator","__generator","body","_","label","sent","trys","ops","f","y","g","verb","op","pop","connection","startConnection","options","peerConnection","_startPeerConnection","Media","_stream","_addTracksToConnection","originator","Data","dataConnection","config","dataChannel","initialize","_makeOffer","handleSDP","sdp","provider","_setupListeners","peerId","peer","connectionId","connectionType","onicecandidate","candidate","socket","Candidate","payload","dst","oniceconnectionstatechange","iceConnectionState","ondatachannel","channel","getConnection","ontrack","stream","streams","mediaConnection","_addStreamToMediaConnection","cleanup","peerConnectionNotClosed","signalingState","dataChannelNotClosed","offer","err_2","err_1_1","createOffer","constraints","sdpTransform","setLocalDescription","metadata","serialization","Offer","emitError","WebRTC","_makeAnswer","answer","err_3","err_1_2","createAnswer","Answer","self","err_4","RTCSessionDescription","setRemoteDescription","handleCandidate","ice","sdpMLineIndex","sdpMid","err_5","addIceCandidate","RTCIceCandidate","addTrack","getTracks","forEach","track","addStream","$0b3b332fd86c5202$exports","$0b3b332fd86c5202$export$23a2a68283c24d80","$0b3b332fd86c5202$var$__extends","_open","$353dee38f9ab557b$var$__extends","$353dee38f9ab557b$var$__assign","$353dee38f9ab557b$var$__values","_localStream","ID_PREFIX","_negotiator","Negotiator","_remoteStream","remoteStream","handleMessage","_payload","messages","_getMessages","messages_1","messages_1_1","_removeConnection","open","BaseConnection","$3356170d7bce7f20$exports","$3356170d7bce7f20$export$d365f7ad9d7df9c9","$3014d862dcc9946b$exports","$3014d862dcc9946b$export$c6913ae0ed687038","$3014d862dcc9946b$var$__extends","fileReader","_queue","_processing","doNextTask","onerror","destroy","queue","enque","processing","abort","shift","$3356170d7bce7f20$var$__extends","$3356170d7bce7f20$var$__values","_buffer","_bufferSize","_buffering","_chunkedData","_encodingQueue","EncodingQueue","Binary","ab","_bufferedSend","_dc","_configureDataChannel","_handleDataMessage","datatype","isBinarySerialization","BinaryUTF8","deserializedData","Blob","unpackedData","ArrayBuffer","ab1","_handleChunk","chunkInfo","count","data_1","chunked","_sendChunks","msg","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blobs_1","blobs_1_1","blob_1","$9e85b3e1327369e6$exports","$9e85b3e1327369e6$export$2c4e825dc9120f87","$9e85b3e1327369e6$var$__awaiter","$9e85b3e1327369e6$var$__generator","_options","_buildRequest","method","url","URL","searchParams","Date","now","fetch","href","referrerPolicy","retrieveId","response","error_1","pathError","status","text","listAllPeers","helpfulError","error_2","json","$26088d7da5b03f69$var$__extends","$26088d7da5b03f69$var$__assign","$26088d7da5b03f69$var$__values","$26088d7da5b03f69$var$__read","$26088d7da5b03f69$var$PeerOptions","PeerOptions","id1","_lastServerId","_destroyed","_connections","Map","_lostMessages","userId","debug","DEFAULT_KEY","hostname","logFunction","_api","API","_createServerConnection","_delayedAbort","BrowserIncompatible","InvalidID","_initialize","catch","_abort","ServerError","plainConnections","_b","_c","_d","k","Socket","_handleMessage","SocketError","disconnected","Network","disconnect","Close","SocketClosed","e_2","src","Open","IdTaken","UnavailableID","InvalidKey","Leave","_cleanupPeer","delete","Expire","PeerUnavailable","MediaConnection","_addConnection","DataConnection","message_1","e_2_1","_storeMessage","has","connect","connections","indexOf","splice","e_3","connections_1","connections_1_1","e_3_1","err","destroyed","e_4","keys","e_4_1","e_5","connections_2","connections_2_1","e_5_1","currentId","reconnect","peers","$70d766613f57b014$export$2e2bcd8739ae039","Peer","util"],"sources":["D:/Desktop/CESAR/Repositorios/Proyecto-WEBII/WEB/webApp/node_modules/peerjs/dist/bundler.mjs"],"sourcesContent":["import $kKvpS$peerjsjsbinarypack from \"peerjs-js-binarypack\";\nimport $kKvpS$webrtcadapter from \"webrtc-adapter\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n\nvar $af8cf1f663f490f4$var$webRTCAdapter = //@ts-ignore\n$kKvpS$webrtcadapter.default || $kKvpS$webrtcadapter;\nvar $af8cf1f663f490f4$export$25be9502477c137d = new /** @class */ (function() {\n    function class_1() {\n        this.isIOS = [\n            \"iPad\",\n            \"iPhone\",\n            \"iPod\"\n        ].includes(navigator.platform);\n        this.supportedBrowsers = [\n            \"firefox\",\n            \"chrome\",\n            \"safari\"\n        ];\n        this.minFirefoxVersion = 59;\n        this.minChromeVersion = 72;\n        this.minSafariVersion = 605;\n    }\n    class_1.prototype.isWebRTCSupported = function() {\n        return typeof RTCPeerConnection !== \"undefined\";\n    };\n    class_1.prototype.isBrowserSupported = function() {\n        var browser = this.getBrowser();\n        var version = this.getVersion();\n        var validBrowser = this.supportedBrowsers.includes(browser);\n        if (!validBrowser) return false;\n        if (browser === \"chrome\") return version >= this.minChromeVersion;\n        if (browser === \"firefox\") return version >= this.minFirefoxVersion;\n        if (browser === \"safari\") return !this.isIOS && version >= this.minSafariVersion;\n        return false;\n    };\n    class_1.prototype.getBrowser = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser;\n    };\n    class_1.prototype.getVersion = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n    };\n    class_1.prototype.isUnifiedPlanSupported = function() {\n        var browser = this.getBrowser();\n        var version = $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n        if (browser === \"chrome\" && version < this.minChromeVersion) return false;\n        if (browser === \"firefox\" && version >= this.minFirefoxVersion) return true;\n        if (!window.RTCRtpTransceiver || !(\"currentDirection\" in RTCRtpTransceiver.prototype)) return false;\n        var tempPc;\n        var supported = false;\n        try {\n            tempPc = new RTCPeerConnection();\n            tempPc.addTransceiver(\"audio\");\n            supported = true;\n        } catch (e) {} finally{\n            if (tempPc) tempPc.close();\n        }\n        return supported;\n    };\n    class_1.prototype.toString = function() {\n        return \"Supports:\\n    browser:\".concat(this.getBrowser(), \"\\n    version:\").concat(this.getVersion(), \"\\n    isIOS:\").concat(this.isIOS, \"\\n    isWebRTCSupported:\").concat(this.isWebRTCSupported(), \"\\n    isBrowserSupported:\").concat(this.isBrowserSupported(), \"\\n    isUnifiedPlanSupported:\").concat(this.isUnifiedPlanSupported());\n    };\n    return class_1;\n}())();\n\n\nvar $06cb531ed7840f78$var$DEFAULT_CONFIG = {\n    iceServers: [\n        {\n            urls: \"stun:stun.l.google.com:19302\"\n        },\n        {\n            urls: [\n                \"turn:eu-0.turn.peerjs.com:3478\",\n                \"turn:us-0.turn.peerjs.com:3478\", \n            ],\n            username: \"peerjs\",\n            credential: \"peerjsp\"\n        }, \n    ],\n    sdpSemantics: \"unified-plan\"\n};\nvar $06cb531ed7840f78$var$Util = /** @class */ function() {\n    function Util() {\n        this.CLOUD_HOST = \"0.peerjs.com\";\n        this.CLOUD_PORT = 443;\n        // Browsers that need chunking:\n        this.chunkedBrowsers = {\n            Chrome: 1,\n            chrome: 1\n        };\n        this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n        // Returns browser-agnostic default config\n        this.defaultConfig = $06cb531ed7840f78$var$DEFAULT_CONFIG;\n        this.browser = $af8cf1f663f490f4$export$25be9502477c137d.getBrowser();\n        this.browserVersion = $af8cf1f663f490f4$export$25be9502477c137d.getVersion();\n        // Lists which features are supported\n        this.supports = function() {\n            var supported = {\n                browser: $af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),\n                webRTC: $af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),\n                audioVideo: false,\n                data: false,\n                binaryBlob: false,\n                reliable: false\n            };\n            if (!supported.webRTC) return supported;\n            var pc;\n            try {\n                pc = new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG);\n                supported.audioVideo = true;\n                var dc = void 0;\n                try {\n                    dc = pc.createDataChannel(\"_PEERJSTEST\", {\n                        ordered: true\n                    });\n                    supported.data = true;\n                    supported.reliable = !!dc.ordered;\n                    // Binary test\n                    try {\n                        dc.binaryType = \"blob\";\n                        supported.binaryBlob = !$af8cf1f663f490f4$export$25be9502477c137d.isIOS;\n                    } catch (e) {}\n                } catch (e) {} finally{\n                    if (dc) dc.close();\n                }\n            } catch (e) {} finally{\n                if (pc) pc.close();\n            }\n            return supported;\n        }();\n        this.pack = $kKvpS$peerjsjsbinarypack.pack;\n        this.unpack = $kKvpS$peerjsjsbinarypack.unpack;\n        // Binary stuff\n        this._dataCount = 1;\n    }\n    Util.prototype.noop = function() {};\n    // Ensure alphanumeric ids\n    Util.prototype.validateId = function(id) {\n        // Allow empty ids\n        return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n    };\n    Util.prototype.chunk = function(blob) {\n        var chunks = [];\n        var size = blob.size;\n        var total = Math.ceil(size / $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n        var index = 0;\n        var start = 0;\n        while(start < size){\n            var end = Math.min(size, start + $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n            var b = blob.slice(start, end);\n            var chunk = {\n                __peerData: this._dataCount,\n                n: index,\n                data: b,\n                total: total\n            };\n            chunks.push(chunk);\n            start = end;\n            index++;\n        }\n        this._dataCount++;\n        return chunks;\n    };\n    Util.prototype.blobToArrayBuffer = function(blob, cb) {\n        var fr = new FileReader();\n        fr.onload = function(evt) {\n            if (evt.target) cb(evt.target.result);\n        };\n        fr.readAsArrayBuffer(blob);\n        return fr;\n    };\n    Util.prototype.binaryStringToArrayBuffer = function(binary) {\n        var byteArray = new Uint8Array(binary.length);\n        for(var i = 0; i < binary.length; i++)byteArray[i] = binary.charCodeAt(i) & 0xff;\n        return byteArray.buffer;\n    };\n    Util.prototype.randomToken = function() {\n        return Math.random().toString(36).slice(2);\n    };\n    Util.prototype.isSecure = function() {\n        return location.protocol === \"https:\";\n    };\n    return Util;\n}();\nvar $06cb531ed7840f78$export$7debb50ef11d5e0b = new $06cb531ed7840f78$var$Util();\n\n\nvar $26088d7da5b03f69$exports = {};\n\n$parcel$export($26088d7da5b03f69$exports, \"Peer\", () => $26088d7da5b03f69$export$ecd1fc136c422448, (v) => $26088d7da5b03f69$export$ecd1fc136c422448 = v);\nvar $ac9b757d51178e15$exports = {};\n'use strict';\nvar $ac9b757d51178e15$var$has = Object.prototype.hasOwnProperty, $ac9b757d51178e15$var$prefix = '~';\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$Events() {}\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n    $ac9b757d51178e15$var$Events.prototype = Object.create(null);\n    //\n    // This hack is needed because the `__proto__` property is still inherited in\n    // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n    //\n    if (!new $ac9b757d51178e15$var$Events().__proto__) $ac9b757d51178e15$var$prefix = false;\n}\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$EE(fn, context, once) {\n    this.fn = fn;\n    this.context = context;\n    this.once = once || false;\n}\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */ function $ac9b757d51178e15$var$addListener(emitter, event, fn, context, once) {\n    if (typeof fn !== 'function') throw new TypeError('The listener must be a function');\n    var listener = new $ac9b757d51178e15$var$EE(fn, context || emitter, once), evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n    else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n    else emitter._events[evt] = [\n        emitter._events[evt],\n        listener\n    ];\n    return emitter;\n}\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */ function $ac9b757d51178e15$var$clearEvent(emitter, evt) {\n    if (--emitter._eventsCount === 0) emitter._events = new $ac9b757d51178e15$var$Events();\n    else delete emitter._events[evt];\n}\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */ function $ac9b757d51178e15$var$EventEmitter() {\n    this._events = new $ac9b757d51178e15$var$Events();\n    this._eventsCount = 0;\n}\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.eventNames = function eventNames() {\n    var names = [], events, name;\n    if (this._eventsCount === 0) return names;\n    for(name in events = this._events)if ($ac9b757d51178e15$var$has.call(events, name)) names.push($ac9b757d51178e15$var$prefix ? name.slice(1) : name);\n    if (Object.getOwnPropertySymbols) return names.concat(Object.getOwnPropertySymbols(events));\n    return names;\n};\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listeners = function listeners(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, handlers = this._events[evt];\n    if (!handlers) return [];\n    if (handlers.fn) return [\n        handlers.fn\n    ];\n    for(var i = 0, l = handlers.length, ee = new Array(l); i < l; i++)ee[i] = handlers[i].fn;\n    return ee;\n};\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listenerCount = function listenerCount(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, listeners = this._events[evt];\n    if (!listeners) return 0;\n    if (listeners.fn) return 1;\n    return listeners.length;\n};\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return false;\n    var listeners = this._events[evt], len = arguments.length, args, i;\n    if (listeners.fn) {\n        if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n        switch(len){\n            case 1:\n                return listeners.fn.call(listeners.context), true;\n            case 2:\n                return listeners.fn.call(listeners.context, a1), true;\n            case 3:\n                return listeners.fn.call(listeners.context, a1, a2), true;\n            case 4:\n                return listeners.fn.call(listeners.context, a1, a2, a3), true;\n            case 5:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n            case 6:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for(i = 1, args = new Array(len - 1); i < len; i++)args[i - 1] = arguments[i];\n        listeners.fn.apply(listeners.context, args);\n    } else {\n        var length = listeners.length, j;\n        for(i = 0; i < length; i++){\n            if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n            switch(len){\n                case 1:\n                    listeners[i].fn.call(listeners[i].context);\n                    break;\n                case 2:\n                    listeners[i].fn.call(listeners[i].context, a1);\n                    break;\n                case 3:\n                    listeners[i].fn.call(listeners[i].context, a1, a2);\n                    break;\n                case 4:\n                    listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n                    break;\n                default:\n                    if (!args) for(j = 1, args = new Array(len - 1); j < len; j++)args[j - 1] = arguments[j];\n                    listeners[i].fn.apply(listeners[i].context, args);\n            }\n        }\n    }\n    return true;\n};\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.on = function on(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, false);\n};\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.once = function once(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, true);\n};\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return this;\n    if (!fn) {\n        $ac9b757d51178e15$var$clearEvent(this, evt);\n        return this;\n    }\n    var listeners = this._events[evt];\n    if (listeners.fn) {\n        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        for(var i = 0, events = [], length = listeners.length; i < length; i++)if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) events.push(listeners[i]);\n        //\n        // Reset the array, or remove it completely if we have no more listeners.\n        //\n        if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n        else $ac9b757d51178e15$var$clearEvent(this, evt);\n    }\n    return this;\n};\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n    var evt;\n    if (event) {\n        evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n        if (this._events[evt]) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        this._events = new $ac9b757d51178e15$var$Events();\n        this._eventsCount = 0;\n    }\n    return this;\n};\n//\n// Alias methods names because people roll like that.\n//\n$ac9b757d51178e15$var$EventEmitter.prototype.off = $ac9b757d51178e15$var$EventEmitter.prototype.removeListener;\n$ac9b757d51178e15$var$EventEmitter.prototype.addListener = $ac9b757d51178e15$var$EventEmitter.prototype.on;\n//\n// Expose the prefix.\n//\n$ac9b757d51178e15$var$EventEmitter.prefixed = $ac9b757d51178e15$var$prefix;\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\n$ac9b757d51178e15$var$EventEmitter.EventEmitter = $ac9b757d51178e15$var$EventEmitter;\n$ac9b757d51178e15$exports = $ac9b757d51178e15$var$EventEmitter;\n\n\n\nvar $1615705ecc6adca3$exports = {};\n\n$parcel$export($1615705ecc6adca3$exports, \"LogLevel\", () => $1615705ecc6adca3$export$243e62d78d3b544d, (v) => $1615705ecc6adca3$export$243e62d78d3b544d = v);\n$parcel$export($1615705ecc6adca3$exports, \"default\", () => $1615705ecc6adca3$export$2e2bcd8739ae039, (v) => $1615705ecc6adca3$export$2e2bcd8739ae039 = v);\nvar $1615705ecc6adca3$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $1615705ecc6adca3$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $1615705ecc6adca3$var$LOG_PREFIX = \"PeerJS: \";\nvar $1615705ecc6adca3$export$243e62d78d3b544d;\n(function($1615705ecc6adca3$export$243e62d78d3b544d) {\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Disabled\"] = 0] = \"Disabled\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Errors\"] = 1] = \"Errors\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Warnings\"] = 2] = \"Warnings\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"All\"] = 3] = \"All\";\n})($1615705ecc6adca3$export$243e62d78d3b544d || ($1615705ecc6adca3$export$243e62d78d3b544d = {}));\nvar $1615705ecc6adca3$var$Logger = /** @class */ function() {\n    function Logger() {\n        this._logLevel = $1615705ecc6adca3$export$243e62d78d3b544d.Disabled;\n    }\n    Object.defineProperty(Logger.prototype, \"logLevel\", {\n        get: function() {\n            return this._logLevel;\n        },\n        set: function(logLevel) {\n            this._logLevel = logLevel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Logger.prototype.log = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.All\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.warn = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Warnings\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.error = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Errors\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.setLogFunction = function(fn) {\n        this._print = fn;\n    };\n    Logger.prototype._print = function(logLevel) {\n        var rest = [];\n        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];\n        var copy = $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$var$LOG_PREFIX\n        ], $1615705ecc6adca3$var$__read(rest), false);\n        for(var i in copy)if (copy[i] instanceof Error) copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n        if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) console.log.apply(console, $1615705ecc6adca3$var$__spreadArray([], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) console.warn.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"WARNING\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) console.error.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"ERROR\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n    };\n    return Logger;\n}();\nvar $1615705ecc6adca3$export$2e2bcd8739ae039 = new $1615705ecc6adca3$var$Logger();\n\n\nvar $31d11a8d122cb4b7$exports = {};\n\n$parcel$export($31d11a8d122cb4b7$exports, \"Socket\", () => $31d11a8d122cb4b7$export$4798917dbf149b79, (v) => $31d11a8d122cb4b7$export$4798917dbf149b79 = v);\n\n\nvar $60fadef21a2daafc$export$3157d57b4135e3bc;\n(function($60fadef21a2daafc$export$3157d57b4135e3bc) {\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Data\"] = \"data\";\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Media\"] = \"media\";\n})($60fadef21a2daafc$export$3157d57b4135e3bc || ($60fadef21a2daafc$export$3157d57b4135e3bc = {}));\nvar $60fadef21a2daafc$export$9547aaa2e39030ff;\n(function($60fadef21a2daafc$export$9547aaa2e39030ff) {\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"BrowserIncompatible\"] = \"browser-incompatible\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidID\"] = \"invalid-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidKey\"] = \"invalid-key\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Network\"] = \"network\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"PeerUnavailable\"] = \"peer-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SslUnavailable\"] = \"ssl-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"ServerError\"] = \"server-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketError\"] = \"socket-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketClosed\"] = \"socket-closed\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"UnavailableID\"] = \"unavailable-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"WebRTC\"] = \"webrtc\";\n})($60fadef21a2daafc$export$9547aaa2e39030ff || ($60fadef21a2daafc$export$9547aaa2e39030ff = {}));\nvar $60fadef21a2daafc$export$89f507cf986a947;\n(function($60fadef21a2daafc$export$89f507cf986a947) {\n    $60fadef21a2daafc$export$89f507cf986a947[\"Binary\"] = \"binary\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"BinaryUTF8\"] = \"binary-utf8\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"JSON\"] = \"json\";\n})($60fadef21a2daafc$export$89f507cf986a947 || ($60fadef21a2daafc$export$89f507cf986a947 = {}));\nvar $60fadef21a2daafc$export$3b5c4a4b6354f023;\n(function($60fadef21a2daafc$export$3b5c4a4b6354f023) {\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Message\"] = \"message\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Error\"] = \"error\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Close\"] = \"close\";\n})($60fadef21a2daafc$export$3b5c4a4b6354f023 || ($60fadef21a2daafc$export$3b5c4a4b6354f023 = {}));\nvar $60fadef21a2daafc$export$adb4a1754da6f10d;\n(function($60fadef21a2daafc$export$adb4a1754da6f10d) {\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Heartbeat\"] = \"HEARTBEAT\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Candidate\"] = \"CANDIDATE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Offer\"] = \"OFFER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Answer\"] = \"ANSWER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Open\"] = \"OPEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Error\"] = \"ERROR\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"IdTaken\"] = \"ID-TAKEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"InvalidKey\"] = \"INVALID-KEY\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Leave\"] = \"LEAVE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Expire\"] = \"EXPIRE\";\n})($60fadef21a2daafc$export$adb4a1754da6f10d || ($60fadef21a2daafc$export$adb4a1754da6f10d = {}));\n\n\nvar $0d1ed891c5cb27c0$exports = {};\n$0d1ed891c5cb27c0$exports = JSON.parse(\"{\\\"name\\\":\\\"peerjs\\\",\\\"version\\\":\\\"1.4.7\\\",\\\"keywords\\\":[\\\"peerjs\\\",\\\"webrtc\\\",\\\"p2p\\\",\\\"rtc\\\"],\\\"description\\\":\\\"PeerJS client\\\",\\\"homepage\\\":\\\"https://peerjs.com\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/peers/peerjs/issues\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"https://github.com/peers/peerjs\\\"},\\\"license\\\":\\\"MIT\\\",\\\"contributors\\\":[\\\"Michelle Bu <michelle@michellebu.com>\\\",\\\"afrokick <devbyru@gmail.com>\\\",\\\"ericz <really.ez@gmail.com>\\\",\\\"Jairo <kidandcat@gmail.com>\\\",\\\"Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>\\\",\\\"Jairo Caro-Accino Viciana <jairo@galax.be>\\\",\\\"Carlos Caballero <carlos.caballero.gonzalez@gmail.com>\\\",\\\"hc <hheennrryy@gmail.com>\\\",\\\"Muhammad Asif <capripio@gmail.com>\\\",\\\"PrashoonB <prashoonbhattacharjee@gmail.com>\\\",\\\"Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>\\\",\\\"akotynski <aleksanderkotbury@gmail.com>\\\",\\\"lmb <i@lmb.io>\\\",\\\"Jairooo <jairocaro@msn.com>\\\",\\\"Moritz Stückler <moritz.stueckler@gmail.com>\\\",\\\"Simon <crydotsnakegithub@gmail.com>\\\",\\\"Denis Lukov <denismassters@gmail.com>\\\",\\\"Philipp Hancke <fippo@andyet.net>\\\",\\\"Hans Oksendahl <hansoksendahl@gmail.com>\\\",\\\"Jess <jessachandler@gmail.com>\\\",\\\"khankuan <khankuan@gmail.com>\\\",\\\"DUODVK <kurmanov.work@gmail.com>\\\",\\\"XiZhao <kwang1imsa@gmail.com>\\\",\\\"Matthias Lohr <matthias@lohr.me>\\\",\\\"=frank tree <=frnktrb@googlemail.com>\\\",\\\"Andre Eckardt <aeckardt@outlook.com>\\\",\\\"Chris Cowan <agentme49@gmail.com>\\\",\\\"Alex Chuev <alex@chuev.com>\\\",\\\"alxnull <alxnull@e.mail.de>\\\",\\\"Yemel Jardi <angel.jardi@gmail.com>\\\",\\\"Ben Parnell <benjaminparnell.94@gmail.com>\\\",\\\"Benny Lichtner <bennlich@gmail.com>\\\",\\\"fresheneesz <bitetrudpublic@gmail.com>\\\",\\\"bob.barstead@exaptive.com <bob.barstead@exaptive.com>\\\",\\\"chandika <chandika@gmail.com>\\\",\\\"emersion <contact@emersion.fr>\\\",\\\"Christopher Van <cvan@users.noreply.github.com>\\\",\\\"eddieherm <edhermoso@gmail.com>\\\",\\\"Eduardo Pinho <enet4mikeenet@gmail.com>\\\",\\\"Evandro Zanatta <ezanatta@tray.net.br>\\\",\\\"Gardner Bickford <gardner@users.noreply.github.com>\\\",\\\"Gian Luca <gianluca.cecchi@cynny.com>\\\",\\\"PatrickJS <github@gdi2290.com>\\\",\\\"jonnyf <github@jonathanfoss.co.uk>\\\",\\\"Hizkia Felix <hizkifw@gmail.com>\\\",\\\"Hristo Oskov <hristo.oskov@gmail.com>\\\",\\\"Isaac Madwed <i.madwed@gmail.com>\\\",\\\"Ilya Konanykhin <ilya.konanykhin@gmail.com>\\\",\\\"jasonbarry <jasbarry@me.com>\\\",\\\"Jonathan Burke <jonathan.burke.1311@googlemail.com>\\\",\\\"Josh Hamit <josh.hamit@gmail.com>\\\",\\\"Jordan Austin <jrax86@gmail.com>\\\",\\\"Joel Wetzell <jwetzell@yahoo.com>\\\",\\\"xizhao <kevin.wang@cloudera.com>\\\",\\\"Alberto Torres <kungfoobar@gmail.com>\\\",\\\"Jonathan Mayol <mayoljonathan@gmail.com>\\\",\\\"Jefferson Felix <me@jsfelix.dev>\\\",\\\"Rolf Erik Lekang <me@rolflekang.com>\\\",\\\"Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>\\\",\\\"Pepijn de Vos <pepijndevos@gmail.com>\\\",\\\"JooYoung <qkdlql@naver.com>\\\",\\\"Tobias Speicher <rootcommander@gmail.com>\\\",\\\"Steve Blaurock <sblaurock@gmail.com>\\\",\\\"Kyrylo Shegeda <shegeda@ualberta.ca>\\\",\\\"Diwank Singh Tomer <singh@diwank.name>\\\",\\\"Sören Balko <Soeren.Balko@gmail.com>\\\",\\\"Arpit Solanki <solankiarpit1997@gmail.com>\\\",\\\"Yuki Ito <yuki@gnnk.net>\\\",\\\"Artur Zayats <zag2art@gmail.com>\\\"],\\\"funding\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"collective\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"files\\\":[\\\"dist/*\\\"],\\\"sideEffects\\\":[\\\"lib/global.ts\\\",\\\"lib/supports.ts\\\"],\\\"main\\\":\\\"dist/bundler.cjs\\\",\\\"module\\\":\\\"dist/bundler.mjs\\\",\\\"browser-minified\\\":\\\"dist/peerjs.min.js\\\",\\\"browser-unminified\\\":\\\"dist/peerjs.js\\\",\\\"types\\\":\\\"dist/types.d.ts\\\",\\\"engines\\\":{\\\"node\\\":\\\">= 10\\\"},\\\"targets\\\":{\\\"types\\\":{\\\"source\\\":\\\"lib/exports.ts\\\"},\\\"main\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"module\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"includeNodeModules\\\":[\\\"eventemitter3\\\"],\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"browser-minified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":true,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"},\\\"browser-unminified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":false,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"}},\\\"scripts\\\":{\\\"contributors\\\":\\\"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\\\\\\"chore(contributors): update and sort contributors list\\\\\\\"\\\",\\\"check\\\":\\\"tsc --noEmit\\\",\\\"watch\\\":\\\"parcel watch\\\",\\\"build\\\":\\\"rm -rf dist && parcel build\\\",\\\"prepublishOnly\\\":\\\"npm run build\\\",\\\"test\\\":\\\"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts\\\",\\\"format\\\":\\\"prettier --write .\\\",\\\"semantic-release\\\":\\\"semantic-release\\\"},\\\"devDependencies\\\":{\\\"@parcel/config-default\\\":\\\"^2.5.0\\\",\\\"@parcel/packager-ts\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-tsc\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-types\\\":\\\"^2.5.0\\\",\\\"@semantic-release/changelog\\\":\\\"^6.0.1\\\",\\\"@semantic-release/git\\\":\\\"^10.0.1\\\",\\\"@types/chai\\\":\\\"^4.3.0\\\",\\\"@types/mocha\\\":\\\"^9.1.0\\\",\\\"@types/node\\\":\\\"^17.0.18\\\",\\\"chai\\\":\\\"^4.3.6\\\",\\\"git-authors-cli\\\":\\\"^1.0.40\\\",\\\"jsdom\\\":\\\"^19.0.0\\\",\\\"jsdom-global\\\":\\\"^3.0.2\\\",\\\"mocha\\\":\\\"^9.2.0\\\",\\\"mock-socket\\\":\\\"8.0.5\\\",\\\"parcel\\\":\\\"^2.5.0\\\",\\\"parcel-transformer-tsc-sourcemaps\\\":\\\"^1.0.2\\\",\\\"prettier\\\":\\\"^2.6.2\\\",\\\"semantic-release\\\":\\\"^19.0.2\\\",\\\"standard\\\":\\\"^16.0.4\\\",\\\"ts-node\\\":\\\"^10.5.0\\\",\\\"typescript\\\":\\\"^4.5.5\\\"},\\\"dependencies\\\":{\\\"@swc/helpers\\\":\\\"^0.3.13\\\",\\\"eventemitter3\\\":\\\"^4.0.7\\\",\\\"peerjs-js-binarypack\\\":\\\"1.0.1\\\",\\\"webrtc-adapter\\\":\\\"^7.7.1\\\"}}\");\n\n\nvar $31d11a8d122cb4b7$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $31d11a8d122cb4b7$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $31d11a8d122cb4b7$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $31d11a8d122cb4b7$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */ var $31d11a8d122cb4b7$export$4798917dbf149b79 = /** @class */ function(_super) {\n    $31d11a8d122cb4b7$var$__extends($31d11a8d122cb4b7$export$4798917dbf149b79, _super);\n    function $31d11a8d122cb4b7$export$4798917dbf149b79(secure, host, port, path, key, pingInterval) {\n        if (pingInterval === void 0) pingInterval = 5000;\n        var _this = _super.call(this) || this;\n        _this.pingInterval = pingInterval;\n        _this._disconnected = true;\n        _this._messagesQueue = [];\n        var wsProtocol = secure ? \"wss://\" : \"ws://\";\n        _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n        return _this;\n    }\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.start = function(id, token) {\n        var _this = this;\n        this._id = id;\n        var wsUrl = \"\".concat(this._baseUrl, \"&id=\").concat(id, \"&token=\").concat(token);\n        if (!!this._socket || !this._disconnected) return;\n        this._socket = new WebSocket(wsUrl + \"&version=\" + $0d1ed891c5cb27c0$exports.version);\n        this._disconnected = false;\n        this._socket.onmessage = function(event) {\n            var data;\n            try {\n                data = JSON.parse(event.data);\n                $1615705ecc6adca3$exports.default.log(\"Server message received:\", data);\n            } catch (e) {\n                $1615705ecc6adca3$exports.default.log(\"Invalid server message\", event.data);\n                return;\n            }\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, data);\n        };\n        this._socket.onclose = function(event) {\n            if (_this._disconnected) return;\n            $1615705ecc6adca3$exports.default.log(\"Socket closed.\", event);\n            _this._cleanup();\n            _this._disconnected = true;\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected);\n        };\n        // Take care of the queue of connections if necessary and make sure Peer knows\n        // socket is open.\n        this._socket.onopen = function() {\n            if (_this._disconnected) return;\n            _this._sendQueuedMessages();\n            $1615705ecc6adca3$exports.default.log(\"Socket open\");\n            _this._scheduleHeartbeat();\n        };\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._scheduleHeartbeat = function() {\n        var _this = this;\n        this._wsPingTimer = setTimeout(function() {\n            _this._sendHeartbeat();\n        }, this.pingInterval);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendHeartbeat = function() {\n        if (!this._wsOpen()) {\n            $1615705ecc6adca3$exports.default.log(\"Cannot send heartbeat, because socket closed\");\n            return;\n        }\n        var message = JSON.stringify({\n            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat\n        });\n        this._socket.send(message);\n        this._scheduleHeartbeat();\n    };\n    /** Is the websocket currently open? */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._wsOpen = function() {\n        return !!this._socket && this._socket.readyState === 1;\n    };\n    /** Send queued messages. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendQueuedMessages = function() {\n        var e_1, _a;\n        //Create copy of queue and clear it,\n        //because send method push the message back to queue if smth will go wrong\n        var copiedQueue = $31d11a8d122cb4b7$var$__spreadArray([], $31d11a8d122cb4b7$var$__read(this._messagesQueue), false);\n        this._messagesQueue = [];\n        try {\n            for(var copiedQueue_1 = $31d11a8d122cb4b7$var$__values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()){\n                var message = copiedQueue_1_1.value;\n                this.send(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    /** Exposed send for DC & Peer. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.send = function(data) {\n        if (this._disconnected) return;\n        // If we didn't get an ID yet, we can't yet send anything so we should queue\n        // up these messages.\n        if (!this._id) {\n            this._messagesQueue.push(data);\n            return;\n        }\n        if (!data.type) {\n            this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, \"Invalid message\");\n            return;\n        }\n        if (!this._wsOpen()) return;\n        var message = JSON.stringify(data);\n        this._socket.send(message);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.close = function() {\n        if (this._disconnected) return;\n        this._cleanup();\n        this._disconnected = true;\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._cleanup = function() {\n        if (this._socket) {\n            this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n            this._socket.close();\n            this._socket = undefined;\n        }\n        clearTimeout(this._wsPingTimer);\n    };\n    return $31d11a8d122cb4b7$export$4798917dbf149b79;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$exports = {};\n\n$parcel$export($353dee38f9ab557b$exports, \"MediaConnection\", () => $353dee38f9ab557b$export$4a84e95a2324ac29, (v) => $353dee38f9ab557b$export$4a84e95a2324ac29 = v);\n\n\nvar $77f14d3e81888156$exports = {};\n\n$parcel$export($77f14d3e81888156$exports, \"Negotiator\", () => $77f14d3e81888156$export$89e6bb5ad64bf4a, (v) => $77f14d3e81888156$export$89e6bb5ad64bf4a = v);\n\n\n\nvar $77f14d3e81888156$var$__assign = undefined && undefined.__assign || function() {\n    $77f14d3e81888156$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $77f14d3e81888156$var$__assign.apply(this, arguments);\n};\nvar $77f14d3e81888156$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $77f14d3e81888156$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\n/**\n * Manages all negotiations between Peers.\n */ var $77f14d3e81888156$export$89e6bb5ad64bf4a = /** @class */ function() {\n    function $77f14d3e81888156$export$89e6bb5ad64bf4a(connection) {\n        this.connection = connection;\n    }\n    /** Returns a PeerConnection object set up correctly (for data, media). */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.startConnection = function(options) {\n        var peerConnection = this._startPeerConnection();\n        // Set the connection's PC.\n        this.connection.peerConnection = peerConnection;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media && options._stream) this._addTracksToConnection(options._stream, peerConnection);\n        // What do we need to do now?\n        if (options.originator) {\n            if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                var dataConnection = this.connection;\n                var config = {\n                    ordered: !!options.reliable\n                };\n                var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n                dataConnection.initialize(dataChannel);\n            }\n            this._makeOffer();\n        } else this.handleSDP(\"OFFER\", options.sdp);\n    };\n    /** Start a PC. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._startPeerConnection = function() {\n        $1615705ecc6adca3$exports.default.log(\"Creating RTCPeerConnection.\");\n        var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n        this._setupListeners(peerConnection);\n        return peerConnection;\n    };\n    /** Set up various WebRTC listeners. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._setupListeners = function(peerConnection) {\n        var _this = this;\n        var peerId = this.connection.peer;\n        var connectionId = this.connection.connectionId;\n        var connectionType = this.connection.type;\n        var provider = this.connection.provider;\n        // ICE CANDIDATES.\n        $1615705ecc6adca3$exports.default.log(\"Listening for ICE candidates.\");\n        peerConnection.onicecandidate = function(evt) {\n            if (!evt.candidate || !evt.candidate.candidate) return;\n            $1615705ecc6adca3$exports.default.log(\"Received ICE candidates for \".concat(peerId, \":\"), evt.candidate);\n            provider.socket.send({\n                type: $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,\n                payload: {\n                    candidate: evt.candidate,\n                    type: connectionType,\n                    connectionId: connectionId\n                },\n                dst: peerId\n            });\n        };\n        peerConnection.oniceconnectionstatechange = function() {\n            switch(peerConnection.iceConnectionState){\n                case \"failed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n                    _this.connection.close();\n                    break;\n                case \"closed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Connection to \" + peerId + \" closed.\"));\n                    _this.connection.close();\n                    break;\n                case \"disconnected\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n                    break;\n                case \"completed\":\n                    peerConnection.onicecandidate = $06cb531ed7840f78$export$7debb50ef11d5e0b.noop;\n                    break;\n            }\n            _this.connection.emit(\"iceStateChanged\", peerConnection.iceConnectionState);\n        };\n        // DATACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for data channel\");\n        // Fired between offer and answer, so options should already be saved\n        // in the options hash.\n        peerConnection.ondatachannel = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received data channel\");\n            var dataChannel = evt.channel;\n            var connection = provider.getConnection(peerId, connectionId);\n            connection.initialize(dataChannel);\n        };\n        // MEDIACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for remote stream\");\n        peerConnection.ontrack = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received remote stream\");\n            var stream = evt.streams[0];\n            var connection = provider.getConnection(peerId, connectionId);\n            if (connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                var mediaConnection = connection;\n                _this._addStreamToMediaConnection(stream, mediaConnection);\n            }\n        };\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.cleanup = function() {\n        $1615705ecc6adca3$exports.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n        var peerConnection = this.connection.peerConnection;\n        if (!peerConnection) return;\n        this.connection.peerConnection = null;\n        //unsubscribe from all PeerConnection's events\n        peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function() {};\n        var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n        var dataChannelNotClosed = false;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n            var dataConnection = this.connection;\n            var dataChannel = dataConnection.dataChannel;\n            if (dataChannel) dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n        }\n        if (peerConnectionNotClosed || dataChannelNotClosed) peerConnection.close();\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeOffer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createOffer(this.connection.options.constraints)\n                        ];\n                    case 2:\n                        offer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created offer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(offer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", offer, \"for:\".concat(this.connection.peer));\n                        payload = {\n                            sdp: offer,\n                            type: this.connection.type,\n                            connectionId: this.connection.connectionId,\n                            metadata: this.connection.metadata,\n                            browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                        };\n                        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                            dataConnection = this.connection;\n                            payload = $77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({}, payload), {\n                                label: dataConnection.label,\n                                reliable: dataConnection.reliable,\n                                serialization: dataConnection.serialization\n                            });\n                        }\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Offer,\n                            payload: payload,\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_2 = _a.sent();\n                        // TODO: investigate why _makeOffer is being called from the answer\n                        if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n                            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_2);\n                            $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_2);\n                        }\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_1 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_1);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to createOffer, \", err_1_1);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeAnswer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, answer, err_3, err_1_2;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createAnswer()\n                        ];\n                    case 2:\n                        answer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created answer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(answer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", answer, \"for:\".concat(this.connection.peer));\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Answer,\n                            payload: {\n                                sdp: answer,\n                                type: this.connection.type,\n                                connectionId: this.connection.connectionId,\n                                browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                            },\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_3 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_3);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_3);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_2 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_2);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to create answer, \", err_1_2);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle an SDP. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleSDP = function(type, sdp) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, self, err_4;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        sdp = new RTCSessionDescription(sdp);\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        $1615705ecc6adca3$exports.default.log(\"Setting remote description\", sdp);\n                        self = this;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setRemoteDescription(sdp)\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set remoteDescription:\".concat(type, \" for:\").concat(this.connection.peer));\n                        if (!(type === \"OFFER\")) return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                        return [\n                            4 /*yield*/ ,\n                            self._makeAnswer()\n                        ];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_4 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_4);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setRemoteDescription, \", err_4);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle a candidate. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleCandidate = function(ice) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        $1615705ecc6adca3$exports.default.log(\"handleCandidate:\", ice);\n                        candidate = ice.candidate;\n                        sdpMLineIndex = ice.sdpMLineIndex;\n                        sdpMid = ice.sdpMid;\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.addIceCandidate(new RTCIceCandidate({\n                                sdpMid: sdpMid,\n                                sdpMLineIndex: sdpMLineIndex,\n                                candidate: candidate\n                            }))\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Added ICE candidate for:\".concat(this.connection.peer));\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 3:\n                        err_5 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_5);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to handleCandidate, \", err_5);\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 4:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addTracksToConnection = function(stream, peerConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add tracks from stream \".concat(stream.id, \" to peer connection\"));\n        if (!peerConnection.addTrack) return $1615705ecc6adca3$exports.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n        stream.getTracks().forEach(function(track) {\n            peerConnection.addTrack(track, stream);\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addStreamToMediaConnection = function(stream, mediaConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add stream \".concat(stream.id, \" to media connection \").concat(mediaConnection.connectionId));\n        mediaConnection.addStream(stream);\n    };\n    return $77f14d3e81888156$export$89e6bb5ad64bf4a;\n}();\n\n\n\nvar $0b3b332fd86c5202$exports = {};\n\n$parcel$export($0b3b332fd86c5202$exports, \"BaseConnection\", () => $0b3b332fd86c5202$export$23a2a68283c24d80, (v) => $0b3b332fd86c5202$export$23a2a68283c24d80 = v);\n\nvar $0b3b332fd86c5202$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $0b3b332fd86c5202$export$23a2a68283c24d80 = /** @class */ function(_super) {\n    $0b3b332fd86c5202$var$__extends($0b3b332fd86c5202$export$23a2a68283c24d80, _super);\n    function $0b3b332fd86c5202$export$23a2a68283c24d80(peer, provider, options) {\n        var _this = _super.call(this) || this;\n        _this.peer = peer;\n        _this.provider = provider;\n        _this.options = options;\n        _this._open = false;\n        _this.metadata = options.metadata;\n        return _this;\n    }\n    Object.defineProperty($0b3b332fd86c5202$export$23a2a68283c24d80.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return $0b3b332fd86c5202$export$23a2a68283c24d80;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $353dee38f9ab557b$var$__assign = undefined && undefined.__assign || function() {\n    $353dee38f9ab557b$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $353dee38f9ab557b$var$__assign.apply(this, arguments);\n};\nvar $353dee38f9ab557b$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps the streaming interface between two Peers.\n */ var $353dee38f9ab557b$export$4a84e95a2324ac29 = /** @class */ function(_super) {\n    $353dee38f9ab557b$var$__extends($353dee38f9ab557b$export$4a84e95a2324ac29, _super);\n    function $353dee38f9ab557b$export$4a84e95a2324ac29(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this._localStream = _this.options._stream;\n        _this.connectionId = _this.options.connectionId || $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        if (_this._localStream) _this._negotiator.startConnection({\n            _stream: _this._localStream,\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Media;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"localStream\", {\n        get: function() {\n            return this._localStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"remoteStream\", {\n        get: function() {\n            return this._remoteStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.addStream = function(remoteStream) {\n        $1615705ecc6adca3$exports.default.log(\"Receiving stream\", remoteStream);\n        this._remoteStream = remoteStream;\n        _super.prototype.emit.call(this, \"stream\", remoteStream); // Should we call this `open`?\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.handleMessage = function(message) {\n        var type = message.type;\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                // Forward to negotiator\n                this._negotiator.handleSDP(type, payload.sdp);\n                this._open = true;\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\".concat(type, \" from peer:\").concat(this.peer));\n                break;\n        }\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.answer = function(stream, options) {\n        var e_1, _a;\n        if (options === void 0) options = {};\n        if (this._localStream) {\n            $1615705ecc6adca3$exports.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n            return;\n        }\n        this._localStream = stream;\n        if (options && options.sdpTransform) this.options.sdpTransform = options.sdpTransform;\n        this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({}, this.options._payload), {\n            _stream: stream\n        }));\n        // Retrieve lost messages stored because PeerConnection not set up.\n        var messages = this.provider._getMessages(this.connectionId);\n        try {\n            for(var messages_1 = $353dee38f9ab557b$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                var message = messages_1_1.value;\n                this.handleMessage(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n        this._open = true;\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.close = function() {\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        this._localStream = null;\n        this._remoteStream = null;\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.options && this.options._stream) this.options._stream = null;\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX = \"mc_\";\n    return $353dee38f9ab557b$export$4a84e95a2324ac29;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\nvar $3356170d7bce7f20$exports = {};\n\n$parcel$export($3356170d7bce7f20$exports, \"DataConnection\", () => $3356170d7bce7f20$export$d365f7ad9d7df9c9, (v) => $3356170d7bce7f20$export$d365f7ad9d7df9c9 = v);\n\n\n\n\n\nvar $3014d862dcc9946b$exports = {};\n\n$parcel$export($3014d862dcc9946b$exports, \"EncodingQueue\", () => $3014d862dcc9946b$export$c6913ae0ed687038, (v) => $3014d862dcc9946b$export$c6913ae0ed687038 = v);\n\n\nvar $3014d862dcc9946b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3014d862dcc9946b$export$c6913ae0ed687038 = /** @class */ function(_super) {\n    $3014d862dcc9946b$var$__extends($3014d862dcc9946b$export$c6913ae0ed687038, _super);\n    function $3014d862dcc9946b$export$c6913ae0ed687038() {\n        var _this = _super.call(this) || this;\n        _this.fileReader = new FileReader();\n        _this._queue = [];\n        _this._processing = false;\n        _this.fileReader.onload = function(evt) {\n            _this._processing = false;\n            if (evt.target) _this.emit(\"done\", evt.target.result);\n            _this.doNextTask();\n        };\n        _this.fileReader.onerror = function(evt) {\n            $1615705ecc6adca3$exports.default.error(\"EncodingQueue error:\", evt);\n            _this._processing = false;\n            _this.destroy();\n            _this.emit(\"error\", evt);\n        };\n        return _this;\n    }\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"queue\", {\n        get: function() {\n            return this._queue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"size\", {\n        get: function() {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"processing\", {\n        get: function() {\n            return this._processing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.enque = function(blob) {\n        this.queue.push(blob);\n        if (this.processing) return;\n        this.doNextTask();\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.destroy = function() {\n        this.fileReader.abort();\n        this._queue = [];\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.doNextTask = function() {\n        if (this.size === 0) return;\n        if (this.processing) return;\n        this._processing = true;\n        this.fileReader.readAsArrayBuffer(this.queue.shift());\n    };\n    return $3014d862dcc9946b$export$c6913ae0ed687038;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $3356170d7bce7f20$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3356170d7bce7f20$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps a DataChannel between two Peers.\n */ var $3356170d7bce7f20$export$d365f7ad9d7df9c9 = /** @class */ function(_super) {\n    $3356170d7bce7f20$var$__extends($3356170d7bce7f20$export$d365f7ad9d7df9c9, _super);\n    function $3356170d7bce7f20$export$d365f7ad9d7df9c9(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this.stringify = JSON.stringify;\n        _this.parse = JSON.parse;\n        _this._buffer = [];\n        _this._bufferSize = 0;\n        _this._buffering = false;\n        _this._chunkedData = {};\n        _this._encodingQueue = new $3014d862dcc9946b$exports.EncodingQueue();\n        _this.connectionId = _this.options.connectionId || $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this.label = _this.options.label || _this.connectionId;\n        _this.serialization = _this.options.serialization || $60fadef21a2daafc$export$89f507cf986a947.Binary;\n        _this.reliable = !!_this.options.reliable;\n        _this._encodingQueue.on(\"done\", function(ab) {\n            _this._bufferedSend(ab);\n        });\n        _this._encodingQueue.on(\"error\", function() {\n            $1615705ecc6adca3$exports.default.error(\"DC#\".concat(_this.connectionId, \": Error occured in encoding from blob to arraybuffer, close DC\"));\n            _this.close();\n        });\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        _this._negotiator.startConnection(_this.options._payload || {\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"dataChannel\", {\n        get: function() {\n            return this._dc;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"bufferSize\", {\n        get: function() {\n            return this._bufferSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Called by the Negotiator when the DataChannel is ready. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.initialize = function(dc) {\n        this._dc = dc;\n        this._configureDataChannel();\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._configureDataChannel = function() {\n        var _this = this;\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob || $06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable) this.dataChannel.binaryType = \"arraybuffer\";\n        this.dataChannel.onopen = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc connection success\"));\n            _this._open = true;\n            _this.emit(\"open\");\n        };\n        this.dataChannel.onmessage = function(e) {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc onmessage:\"), e.data);\n            _this._handleDataMessage(e);\n        };\n        this.dataChannel.onclose = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc closed for:\"), _this.peer);\n            _this.close();\n        };\n    };\n    // Handles a DataChannel message.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleDataMessage = function(_a) {\n        var _this = this;\n        var data = _a.data;\n        var datatype = data.constructor;\n        var isBinarySerialization = this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8;\n        var deserializedData = data;\n        if (isBinarySerialization) {\n            if (datatype === Blob) {\n                // Datatype should never be blob\n                $06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(data, function(ab) {\n                    var unpackedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab);\n                    _this.emit(\"data\", unpackedData);\n                });\n                return;\n            } else if (datatype === ArrayBuffer) deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(data);\n            else if (datatype === String) {\n                // String fallback for binary data for browsers that don't support binary yet\n                var ab1 = $06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(data);\n                deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab1);\n            }\n        } else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) deserializedData = this.parse(data);\n        // Check if we've chunked--if so, piece things back together.\n        // We're guaranteed that this isn't 0.\n        if (deserializedData.__peerData) {\n            this._handleChunk(deserializedData);\n            return;\n        }\n        _super.prototype.emit.call(this, \"data\", deserializedData);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleChunk = function(data) {\n        var id = data.__peerData;\n        var chunkInfo = this._chunkedData[id] || {\n            data: [],\n            count: 0,\n            total: data.total\n        };\n        chunkInfo.data[data.n] = data.data;\n        chunkInfo.count++;\n        this._chunkedData[id] = chunkInfo;\n        if (chunkInfo.total === chunkInfo.count) {\n            // Clean up before making the recursive call to `_handleDataMessage`.\n            delete this._chunkedData[id];\n            // We've received all the chunks--time to construct the complete data.\n            var data_1 = new Blob(chunkInfo.data);\n            this._handleDataMessage({\n                data: data_1\n            });\n        }\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.close = function() {\n        this._buffer = [];\n        this._bufferSize = 0;\n        this._chunkedData = {};\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.dataChannel) {\n            this.dataChannel.onopen = null;\n            this.dataChannel.onmessage = null;\n            this.dataChannel.onclose = null;\n            this._dc = null;\n        }\n        if (this._encodingQueue) {\n            this._encodingQueue.destroy();\n            this._encodingQueue.removeAllListeners();\n            this._encodingQueue = null;\n        }\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    /** Allows user to send data. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.send = function(data, chunked) {\n        if (!this.open) {\n            _super.prototype.emit.call(this, \"error\", new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n            return;\n        }\n        if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) this._bufferedSend(this.stringify(data));\n        else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8) {\n            var blob = $06cb531ed7840f78$export$7debb50ef11d5e0b.pack(data);\n            if (!chunked && blob.size > $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU) {\n                this._sendChunks(blob);\n                return;\n            }\n            if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob) // We only do this if we really need to (e.g. blobs are not supported),\n            // because this conversion is costly.\n            this._encodingQueue.enque(blob);\n            else this._bufferedSend(blob);\n        } else this._bufferedSend(data);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._bufferedSend = function(msg) {\n        if (this._buffering || !this._trySend(msg)) {\n            this._buffer.push(msg);\n            this._bufferSize = this._buffer.length;\n        }\n    };\n    // Returns true if the send succeeds.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._trySend = function(msg) {\n        var _this = this;\n        if (!this.open) return false;\n        if (this.dataChannel.bufferedAmount > $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT) {\n            this._buffering = true;\n            setTimeout(function() {\n                _this._buffering = false;\n                _this._tryBuffer();\n            }, 50);\n            return false;\n        }\n        try {\n            this.dataChannel.send(msg);\n        } catch (e) {\n            $1615705ecc6adca3$exports.default.error(\"DC#:\".concat(this.connectionId, \" Error when sending:\"), e);\n            this._buffering = true;\n            this.close();\n            return false;\n        }\n        return true;\n    };\n    // Try to send the first message in the buffer.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._tryBuffer = function() {\n        if (!this.open) return;\n        if (this._buffer.length === 0) return;\n        var msg = this._buffer[0];\n        if (this._trySend(msg)) {\n            this._buffer.shift();\n            this._bufferSize = this._buffer.length;\n            this._tryBuffer();\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._sendChunks = function(blob) {\n        var e_1, _a;\n        var blobs = $06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(blob);\n        $1615705ecc6adca3$exports.default.log(\"DC#\".concat(this.connectionId, \" Try to send \").concat(blobs.length, \" chunks...\"));\n        try {\n            for(var blobs_1 = $3356170d7bce7f20$var$__values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()){\n                var blob_1 = blobs_1_1.value;\n                this.send(blob_1, true);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.handleMessage = function(message) {\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                this._negotiator.handleSDP(message.type, payload.sdp);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n                break;\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX = \"dc_\";\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT = 8388608;\n    return $3356170d7bce7f20$export$d365f7ad9d7df9c9;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\n\nvar $9e85b3e1327369e6$exports = {};\n\n$parcel$export($9e85b3e1327369e6$exports, \"API\", () => $9e85b3e1327369e6$export$2c4e825dc9120f87, (v) => $9e85b3e1327369e6$export$2c4e825dc9120f87 = v);\n\n\n\nvar $9e85b3e1327369e6$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $9e85b3e1327369e6$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nvar $9e85b3e1327369e6$export$2c4e825dc9120f87 = /** @class */ function() {\n    function $9e85b3e1327369e6$export$2c4e825dc9120f87(_options) {\n        this._options = _options;\n    }\n    $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype._buildRequest = function(method) {\n        var protocol = this._options.secure ? \"https\" : \"http\";\n        var _a = this._options, host = _a.host, port = _a.port, path = _a.path, key = _a.key;\n        var url = new URL(\"\".concat(protocol, \"://\").concat(host, \":\").concat(port).concat(path).concat(key, \"/\").concat(method));\n        // TODO: Why timestamp, why random?\n        url.searchParams.set(\"ts\", \"\".concat(Date.now()).concat(Math.random()));\n        url.searchParams.set(\"version\", $0d1ed891c5cb27c0$exports.version);\n        return fetch(url.href, {\n            referrerPolicy: this._options.referrerPolicy\n        });\n    };\n    /** Get a unique ID from the server via XHR and initialize with it. */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.retrieveId = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, error_1, pathError;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"id\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) throw new Error(\"Error. Status:\".concat(response.status));\n                        return [\n                            2 /*return*/ ,\n                            response.text()\n                        ];\n                    case 2:\n                        error_1 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving ID\", error_1);\n                        pathError = \"\";\n                        if (this._options.path === \"/\" && this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n                        throw new Error(\"Could not get an ID from the server.\" + pathError);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** @deprecated */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.listAllPeers = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, helpfulError, error_2;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"peers\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) {\n                            if (response.status === 401) {\n                                helpfulError = \"\";\n                                if (this._options.host === $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";\n                                else helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n                                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n                            }\n                            throw new Error(\"Error. Status:\".concat(response.status));\n                        }\n                        return [\n                            2 /*return*/ ,\n                            response.json()\n                        ];\n                    case 2:\n                        error_2 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving list peers\", error_2);\n                        throw new Error(\"Could not get list peers from the server.\" + error_2);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    return $9e85b3e1327369e6$export$2c4e825dc9120f87;\n}();\n\n\nvar $26088d7da5b03f69$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $26088d7da5b03f69$var$__assign = undefined && undefined.__assign || function() {\n    $26088d7da5b03f69$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $26088d7da5b03f69$var$__assign.apply(this, arguments);\n};\nvar $26088d7da5b03f69$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar $26088d7da5b03f69$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $26088d7da5b03f69$var$PeerOptions = /** @class */ function() {\n    function PeerOptions() {}\n    return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */ var $26088d7da5b03f69$export$ecd1fc136c422448 = /** @class */ function(_super) {\n    $26088d7da5b03f69$var$__extends($26088d7da5b03f69$export$ecd1fc136c422448, _super);\n    function $26088d7da5b03f69$export$ecd1fc136c422448(id1, options) {\n        var _this = _super.call(this) || this;\n        _this._id = null;\n        _this._lastServerId = null;\n        // States.\n        _this._destroyed = false; // Connections have been killed\n        _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n        _this._open = false; // Sockets and such are not yet open.\n        _this._connections = new Map(); // All connections for this peer.\n        _this._lostMessages = new Map(); // src => [list of messages]\n        var userId;\n        // Deal with overloading\n        if (id1 && id1.constructor == Object) options = id1;\n        else if (id1) userId = id1.toString();\n        // Configurize options\n        options = $26088d7da5b03f69$var$__assign({\n            debug: 0,\n            host: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,\n            port: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,\n            path: \"/\",\n            key: $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY,\n            token: $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),\n            config: $06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,\n            referrerPolicy: \"strict-origin-when-cross-origin\"\n        }, options);\n        _this._options = options;\n        // Detect relative URL host.\n        if (_this._options.host === \"/\") _this._options.host = window.location.hostname;\n        // Set path correctly.\n        if (_this._options.path) {\n            if (_this._options.path[0] !== \"/\") _this._options.path = \"/\" + _this._options.path;\n            if (_this._options.path[_this._options.path.length - 1] !== \"/\") _this._options.path += \"/\";\n        }\n        // Set whether we use SSL to same as current host\n        if (_this._options.secure === undefined && _this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = $06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure();\n        else if (_this._options.host == $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = true;\n        // Set a custom log function if present\n        if (_this._options.logFunction) $1615705ecc6adca3$exports.default.setLogFunction(_this._options.logFunction);\n        $1615705ecc6adca3$exports.default.logLevel = _this._options.debug || 0;\n        _this._api = new $9e85b3e1327369e6$exports.API(options);\n        _this._socket = _this._createServerConnection();\n        // Sanity checks\n        // Ensure WebRTC supported\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo && !$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible, \"The current browser does not support WebRTC\");\n            return _this;\n        }\n        // Ensure alphanumeric id\n        if (!!userId && !$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(userId)) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID, \"ID \\\"\".concat(userId, \"\\\" is invalid\"));\n            return _this;\n        }\n        if (userId) _this._initialize(userId);\n        else _this._api.retrieveId().then(function(id) {\n            return _this._initialize(id);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n        return _this;\n    }\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"id\", {\n        /**\n         * The brokering ID of this peer\n         */ get: function() {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"options\", {\n        get: function() {\n            return this._options;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"socket\", {\n        get: function() {\n            return this._socket;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"connections\", {\n        /**\n         * A hash of all connections associated with this peer, keyed by the remote peer's ID.\n         * @deprecated\n         * Return type will change from Object to Map<string,[]>\n         */ get: function() {\n            var e_1, _a;\n            var plainConnections = Object.create(null);\n            try {\n                for(var _b = $26088d7da5b03f69$var$__values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()){\n                    var _d = $26088d7da5b03f69$var$__read(_c.value, 2), k = _d[0], v = _d[1];\n                    plainConnections[k] = v;\n                }\n            } catch (e_1_1) {\n                e_1 = {\n                    error: e_1_1\n                };\n            } finally{\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                } finally{\n                    if (e_1) throw e_1.error;\n                }\n            }\n            return plainConnections;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"destroyed\", {\n        /**\n         * true if this peer and all of its connections can no longer be used.\n         */ get: function() {\n            return this._destroyed;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"disconnected\", {\n        /**\n         * false if there is an active connection to the PeerServer.\n         */ get: function() {\n            return this._disconnected;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._createServerConnection = function() {\n        var _this = this;\n        var socket = new $31d11a8d122cb4b7$exports.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, function(data) {\n            _this._handleMessage(data);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, function(error) {\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError, error);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected, function() {\n            if (_this.disconnected) return;\n            _this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network, \"Lost connection to server.\");\n            _this.disconnect();\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close, function() {\n            if (_this.disconnected) return;\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed, \"Underlying socket is already closed.\");\n        });\n        return socket;\n    };\n    /** Initialize a connection with the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._initialize = function(id) {\n        this._id = id;\n        this.socket.start(id, this._options.token);\n    };\n    /** Handles messages from the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._handleMessage = function(message) {\n        var e_2, _a;\n        var type = message.type;\n        var payload = message.payload;\n        var peerId = message.src;\n        switch(type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:\n                this._lastServerId = this.id;\n                this._open = true;\n                this.emit(\"open\", this.id);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, payload.msg);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID, \"ID \\\"\".concat(this.id, \"\\\" is taken\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey, \"API KEY \\\"\".concat(this._options.key, \"\\\" is invalid\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:\n                $1615705ecc6adca3$exports.default.log(\"Received leave message from \".concat(peerId));\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:\n                this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable, \"Could not connect to peer \".concat(peerId));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:\n                // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection) {\n                    connection.close();\n                    $1615705ecc6adca3$exports.default.warn(\"Offer received for existing Connection ID:\".concat(connectionId));\n                }\n                // Create a new connection.\n                if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                    var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata\n                    });\n                    connection = mediaConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"call\", mediaConnection);\n                } else if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                    var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata,\n                        label: payload.label,\n                        serialization: payload.serialization,\n                        reliable: payload.reliable\n                    });\n                    connection = dataConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"connection\", dataConnection);\n                } else {\n                    $1615705ecc6adca3$exports.default.warn(\"Received malformed connection type:\".concat(payload.type));\n                    return;\n                }\n                // Find messages.\n                var messages = this._getMessages(connectionId);\n                try {\n                    for(var messages_1 = $26088d7da5b03f69$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                        var message_1 = messages_1_1.value;\n                        connection.handleMessage(message_1);\n                    }\n                } catch (e_2_1) {\n                    e_2 = {\n                        error: e_2_1\n                    };\n                } finally{\n                    try {\n                        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n                    } finally{\n                        if (e_2) throw e_2.error;\n                    }\n                }\n                break;\n            default:\n                if (!payload) {\n                    $1615705ecc6adca3$exports.default.warn(\"You received a malformed message from \".concat(peerId, \" of type \").concat(type));\n                    return;\n                }\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection && connection.peerConnection) // Pass it on.\n                connection.handleMessage(message);\n                else if (connectionId) // Store for possible later use\n                this._storeMessage(connectionId, message);\n                else $1615705ecc6adca3$exports.default.warn(\"You received an unrecognized message:\", message);\n                break;\n        }\n    };\n    /** Stores messages without a set up connection, to be claimed later. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._storeMessage = function(connectionId, message) {\n        if (!this._lostMessages.has(connectionId)) this._lostMessages.set(connectionId, []);\n        this._lostMessages.get(connectionId).push(message);\n    };\n    /** Retrieve messages from lost message store */ //TODO Change it to private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._getMessages = function(connectionId) {\n        var messages = this._lostMessages.get(connectionId);\n        if (messages) {\n            this._lostMessages.delete(connectionId);\n            return messages;\n        }\n        return [];\n    };\n    /**\n     * Connects to the remote peer specified by id and returns a data connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param options for specifying details about Peer Connection\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.connect = function(peer, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peer, this, options);\n        this._addConnection(peer, dataConnection);\n        return dataConnection;\n    };\n    /**\n     * Calls the remote peer specified by id and returns a media connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param stream The caller's media stream\n     * @param options Metadata associated with the connection, passed in by whoever initiated the connection.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.call = function(peer, stream, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        if (!stream) {\n            $1615705ecc6adca3$exports.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n            return;\n        }\n        var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peer, this, $26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({}, options), {\n            _stream: stream\n        }));\n        this._addConnection(peer, mediaConnection);\n        return mediaConnection;\n    };\n    /** Add a data/media connection to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._addConnection = function(peerId, connection) {\n        $1615705ecc6adca3$exports.default.log(\"add connection \".concat(connection.type, \":\").concat(connection.connectionId, \" to peerId:\").concat(peerId));\n        if (!this._connections.has(peerId)) this._connections.set(peerId, []);\n        this._connections.get(peerId).push(connection);\n    };\n    //TODO should be private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._removeConnection = function(connection) {\n        var connections = this._connections.get(connection.peer);\n        if (connections) {\n            var index = connections.indexOf(connection);\n            if (index !== -1) connections.splice(index, 1);\n        }\n        //remove from lost messages\n        this._lostMessages.delete(connection.connectionId);\n    };\n    /** Retrieve a data/media connection for this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.getConnection = function(peerId, connectionId) {\n        var e_3, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return null;\n        try {\n            for(var connections_1 = $26088d7da5b03f69$var$__values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()){\n                var connection = connections_1_1.value;\n                if (connection.connectionId === connectionId) return connection;\n            }\n        } catch (e_3_1) {\n            e_3 = {\n                error: e_3_1\n            };\n        } finally{\n            try {\n                if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n            } finally{\n                if (e_3) throw e_3.error;\n            }\n        }\n        return null;\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._delayedAbort = function(type, message) {\n        var _this = this;\n        setTimeout(function() {\n            _this._abort(type, message);\n        }, 0);\n    };\n    /**\n     * Emits an error message and destroys the Peer.\n     * The Peer is not destroyed if it's in a disconnected state, in which case\n     * it retains its disconnected state and its existing connections.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._abort = function(type, message) {\n        $1615705ecc6adca3$exports.default.error(\"Aborting!\");\n        this.emitError(type, message);\n        if (!this._lastServerId) this.destroy();\n        else this.disconnect();\n    };\n    /** Emits a typed error message. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.emitError = function(type, err) {\n        $1615705ecc6adca3$exports.default.error(\"Error:\", err);\n        var error;\n        if (typeof err === \"string\") error = new Error(err);\n        else error = err;\n        error.type = type;\n        this.emit(\"error\", error);\n    };\n    /**\n     * Destroys the Peer: closes all active connections as well as the connection\n     *  to the server.\n     * Warning: The peer can no longer create or accept connections after being\n     *  destroyed.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.destroy = function() {\n        if (this.destroyed) return;\n        $1615705ecc6adca3$exports.default.log(\"Destroy peer with ID:\".concat(this.id));\n        this.disconnect();\n        this._cleanup();\n        this._destroyed = true;\n        this.emit(\"close\");\n    };\n    /** Disconnects every connection on this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanup = function() {\n        var e_4, _a;\n        try {\n            for(var _b = $26088d7da5b03f69$var$__values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()){\n                var peerId = _c.value;\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n            }\n        } catch (e_4_1) {\n            e_4 = {\n                error: e_4_1\n            };\n        } finally{\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally{\n                if (e_4) throw e_4.error;\n            }\n        }\n        this.socket.removeAllListeners();\n    };\n    /** Closes all connections to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanupPeer = function(peerId) {\n        var e_5, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return;\n        try {\n            for(var connections_2 = $26088d7da5b03f69$var$__values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()){\n                var connection = connections_2_1.value;\n                connection.close();\n            }\n        } catch (e_5_1) {\n            e_5 = {\n                error: e_5_1\n            };\n        } finally{\n            try {\n                if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n            } finally{\n                if (e_5) throw e_5.error;\n            }\n        }\n    };\n    /**\n     * Disconnects the Peer's connection to the PeerServer. Does not close any\n     *  active connections.\n     * Warning: The peer can no longer create or accept connections after being\n     *  disconnected. It also cannot reconnect to the server.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.disconnect = function() {\n        if (this.disconnected) return;\n        var currentId = this.id;\n        $1615705ecc6adca3$exports.default.log(\"Disconnect peer with ID:\".concat(currentId));\n        this._disconnected = true;\n        this._open = false;\n        this.socket.close();\n        this._lastServerId = currentId;\n        this._id = null;\n        this.emit(\"disconnected\", currentId);\n    };\n    /** Attempts to reconnect with the same ID. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.reconnect = function() {\n        if (this.disconnected && !this.destroyed) {\n            $1615705ecc6adca3$exports.default.log(\"Attempting reconnection to server with ID \".concat(this._lastServerId));\n            this._disconnected = false;\n            this._initialize(this._lastServerId);\n        } else if (this.destroyed) throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n        else if (!this.disconnected && !this.open) // Do nothing. We're still connecting the first time.\n        $1615705ecc6adca3$exports.default.error(\"In a hurry? We're still trying to make the initial connection!\");\n        else throw new Error(\"Peer \".concat(this.id, \" cannot reconnect because it is not disconnected from the server!\"));\n    };\n    /**\n     * Get a list of available peer IDs. If you're running your own server, you'll\n     * want to set allow_discovery: true in the PeerServer options. If you're using\n     * the cloud server, email team@peerjs.com to get the functionality enabled for\n     * your key.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.listAllPeers = function(cb) {\n        var _this = this;\n        if (cb === void 0) cb = function(_) {};\n        this._api.listAllPeers().then(function(peers) {\n            return cb(peers);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY = \"peerjs\";\n    return $26088d7da5b03f69$export$ecd1fc136c422448;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $70d766613f57b014$export$2e2bcd8739ae039 = $26088d7da5b03f69$exports.Peer;\n\n\nexport {$70d766613f57b014$export$2e2bcd8739ae039 as default, $26088d7da5b03f69$export$ecd1fc136c422448 as Peer, $06cb531ed7840f78$export$7debb50ef11d5e0b as util};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}